"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const s=require("vuedraggable"),i=require("../BaseBoxButton/BaseBoxButton.cjs.js");require("./BaseDropBox.vue_vue_type_style_index_0_scoped_094cef27_lang.cjs.js");const d=require("../../_virtual/_plugin-vue2_normalizer.cjs.js"),o=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},n=o(s),l={name:"BaseDropBox",components:{BaseBoxButton:i.default,Draggable:n.default},props:{icon:{type:String,default:null},showPlus:{type:Boolean,default:!1},text:{type:String,default:""},subtext:{type:String,default:""},boxSize:{type:Object,default:()=>({width:"250px"})},boxRatio:{type:String,default:"100"},renderElementAs:{type:String,default:"div"},dropType:{type:String,default:"files",validate(e){return["files","elements"].includes(e)}},dropElementName:{type:String,default:""},dragItemClass:{type:String,default:""},disabled:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!1}},data(){return{dragAndDropCapable:!1,isDragOver:!1,dragList:[]}},mounted(){this.dragAndDropCapable=this.determineDragAndDropCapable(),this.dragAndDropCapable&&this.dropType==="files"&&!this.disabled&&(["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(e=>{this.$refs.fileform.addEventListener(e,t=>{t.preventDefault(),t.stopPropagation()},!1)}),this.$refs.fileform.addEventListener("drop",e=>{this.isDragOver=!1,this.$emit("dropped-file",e)}),["dragenter","dragleave"].forEach(e=>{this.$refs.fileform.addEventListener(e,t=>{t.dataTransfer.types.includes("draggable")||(this.isDragOver=!this.isDragOver)})}))},methods:{onDragChange(e){return this.isDragOver||(this.dragItemClass?e.clone.className.includes(this.dragItemClass)&&(this.isDragOver=!0):this.isDragOver=!0),e.newIndex},determineDragAndDropCapable(){const e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window},addEntry(e){if(this.dropType==="elements"){if(this.isDragOver){const t=this.dragList[0].id;this.$emit("dropped-element",t)}this.dragList=[],e.originalEvent.type==="touchend"&&(this.isDragOver=!1)}},dragEnter(e){e.pointerType==="touch"&&!this.disabled&&!this.isDragOver&&this.$emit("clicked",e)},dragLeave(e){e.pointerType==="touch"&&!e.relatedTarget||(this.isDragOver=!1)},onClicked(e){"ontouchstart"in window||navigator.msMaxTouchPoints>0||this.disabled||this.$emit("clicked",e)},onTooltip(e){this.$emit("clicked",e)}}};var g=function(){var t=this,a=t._self._c;return a("BaseBoxButton",t._b({class:["base-drop-box",{"base-box-button-disabled":t.disabled},{"is-drag-over":t.isDragOver}],attrs:{"box-ratio":t.boxRatio,"render-element-as":t.renderElementAs,disabled:t.disabled},on:{clicked:t.onClicked,onTooltip:t.onTooltip}},"BaseBoxButton",t.$props,!1),[a("div",{staticClass:"base-drop-box-inner"},[t.dropType==="elements"?a("draggable",{staticClass:"base-drop-box-drag-area",attrs:{sort:!1,group:t.dropElementName,"on-change":t.onDragChange,"ghost-class":"base-drop-box-ghost"},on:{add:t.addEntry},model:{value:t.dragList,callback:function(r){t.dragList=r},expression:"dragList"}},[a("div",{staticClass:"base-drop-box-drag-area",on:{dragleave:t.dragLeave,pointerenter:t.dragEnter,pointerleave:t.dragLeave}},t._l(t.dragList,function(r){return a("div",{key:r.id,staticClass:"base-drop-box-cloned-items"},[t._v(" "+t._s(r)+" ")])}),0)]):a("form",{ref:"fileform"})],1)])},p=[],f=d.default(l,g,p,!1,null,"094cef27",null,null);const u=f.exports;exports.default=u;
//# sourceMappingURL=BaseDropBox.cjs.js.map
