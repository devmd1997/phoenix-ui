{"version":3,"file":"BaseExpandBox.cjs.js","sources":["../../../src/components/BaseExpandBox/BaseExpandBox.vue"],"sourcesContent":["<template>\n  <base-box\n    box-ratio=\"0\"\n    :box-size=\"{}\"\n    :box-hover=\"false\"\n    :style=\"style\"\n    :class=\"[\n      'base-expand-box',\n      'base-expand-box-padding-' + padding,\n      { 'base-expand-box-auto-height': autoHeight },\n      { 'base-expand-box-open': expandInt }]\">\n    <div\n      :class=\"[\n        'base-expand-box-content',\n        { 'base-expand-box-content-fade-out': (!initialized || !expandInt && showButton) }]\">\n      <div\n        class=\"base-expand-box-content-inner\">\n        <!-- div is needed for calculation of content height -->\n        <div>\n          <!--\n            @slot add expand box content here\n          -->\n          <slot />\n        </div>\n      </div>\n    </div>\n\n    <base-button\n      v-if=\"showButton\"\n      :text=\"expandInt ? showLessText : showMoreText\"\n      :has-background-color=\"false\"\n      align-text=\"left\"\n      icon=\"drop-down\"\n      icon-position=\"right\"\n      :class=\"[\n        'base-expand-box-button',\n        { 'base-button-icon-rotate-180': expandInt }]\"\n      @clicked=\"clicked\" />\n\n    <div\n      v-if=\"!!$slots.footer\"\n      class=\"base-expand-box-footer\">\n      <div class=\"base-expand-box-footer-inner\">\n        <!-- @slot slot to add additional information after expandable content -->\n        <slot name=\"footer\" />\n      </div>\n    </div>\n  </base-box>\n</template>\n\n<script>\nimport BaseBox from '../BaseBox/BaseBox';\nimport BaseButton from '../BaseButton/BaseButton';\n\n/**\n * Component to render content in expandable container\n */\n\nexport default {\n  name: 'BaseExpandBox',\n  components: {\n    BaseBox,\n    BaseButton,\n  },\n  props: {\n    /**\n     * expand box from outside\n     */\n    expand: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * define padding of the box\n     */\n    padding: {\n      type: String,\n      default: 'small',\n      validator(val) {\n        return ['large', 'small'].includes(val);\n      },\n    },\n    /**\n     * button text to show more content\n     */\n    showMoreText: {\n      type: String,\n      default: 'Show more',\n    },\n    /**\n     * button text to show less content\n     */\n    showLessText: {\n      type: String,\n      default: 'Show less',\n    },\n    autoHeight: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * define the max height of the collapsed box in px\n     */\n    maxCollapsedHeight: {\n      type: Number,\n      default: 300,\n    },\n    /**\n     * define the height including margin of the show-more button in px\n     */\n    showButtonHeight: {\n      type: Number,\n      default: 54,\n    },\n  },\n  data() {\n    return {\n      expandInt: false,\n      contentWidth: null,\n      initialized: false,\n      showButton: false,\n    };\n  },\n  computed: {\n    maxCollapsedHeightInt() {\n      return this.showButton\n        ? this.maxCollapsedHeight - this.showButtonHeight\n        : this.maxCollapsedHeight;\n    },\n    style() {\n      return { '--max-collapsed-height': `${this.maxCollapsedHeightInt}px` };\n    },\n  },\n  mounted() {\n    this.init();\n  },\n  methods: {\n    /**\n     * init\n     */\n    init() {\n      if (this.expand) {\n        // check if button is needed\n        this.showButton = this.contentInnerHeight() > this.contentHeight();\n        this.expandInt = true;\n      }\n\n      this.initialized = true;\n\n      // observe resize of container and set visibility of button\n      this.boxResize().observe(this.$el);\n    },\n    /**\n     * check if box width changes and set visibility of button\n     */\n    boxResize() {\n      return new ResizeObserver((entries) => {\n        const currentWidth = entries[0].contentRect.width;\n\n        if (this.contentWidth !== currentWidth) {\n          // compare content to parent container -> set button visibility\n          if (!this.expandInt) {\n            this.showButton = this.contentInnerHeight() > this.contentHeight();\n          }\n\n          // close expanded box\n          if (this.expand\n            && this.expandInt\n            && this.contentWidth !== null) {\n            this.expandInt = false;\n          }\n        }\n\n        // save currentWidth for next comparison\n        this.contentWidth = currentWidth;\n\n        // emit box-size\n        if (!this.expandInt) {\n          /**\n           * emitting box-height on resize\n           * @param {number} - the element offset height\n           */\n          this.$emit('box-height', this.$el.offsetHeight);\n        }\n      });\n    },\n    /**\n     * calculate height of content\n     */\n    contentHeight() {\n      return this.$el.querySelector('.base-expand-box-content').offsetHeight;\n    },\n    /**\n     * calculate height of content inner\n     */\n    contentInnerHeight() {\n      return this.$el.querySelector('.base-expand-box-content-inner > div').offsetHeight;\n    },\n    /**\n     *\n     */\n    clicked() {\n      this.expandInt = !this.expandInt;\n\n      /**\n       * event emitted on button click\n       * @param {boolean} - is box expanded\n       */\n      this.$emit('update:expand', this.expandInt);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  @import \"../../styles/variables\";\n\n  .base-expand-box {\n    flex-direction: column;\n\n    &.base-expand-box-padding-small {\n      padding: $spacing;\n    }\n\n    &.base-expand-box-padding-large {\n      padding: $spacing-large;\n    }\n\n    &.base-expand-box-auto-height:not(.base-expand-box-open) .base-expand-box-content {\n      max-height: var(--max-collapsed-height);\n    }\n\n    &:not(.base-expand-box-auto-height) .base-expand-box-content {\n      height: var(--max-collapsed-height);\n    }\n\n    .base-expand-box-content {\n      position: relative;\n      overflow: hidden;\n      line-height: $line-height;\n\n      &.base-expand-box-content-fade-out::after {\n        content: '';\n        width: 100%;\n        height: $line-height * 2;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        z-index: 1;\n        pointer-events: none;\n        background: linear-gradient(to bottom, rgba(255, 255, 255, 0) , white);\n      }\n    }\n\n    .base-expand-box-content-inner {\n      position: relative;\n      height: 100%;\n      visibility: visible;\n    }\n\n    .base-expand-box-button {\n      margin-top: $spacing;\n      padding-left: 0;\n      justify-content: flex-start; // IE 11\n    }\n\n    &.base-expand-box-open {\n      .base-expand-box-content {\n        height: auto;\n      }\n    }\n\n    .base-expand-box-footer {\n      margin-top: auto;\n\n      .base-expand-box-footer-inner {\n        border-top: $border-width solid $background-color;\n        margin: $spacing 0 0;\n        padding-top: $spacing;\n      }\n    }\n  }\n</style>\n"],"names":["_sfc_main","BaseBox","BaseButton","val","entries","currentWidth"],"mappings":"yVA0DAA,EAAA,CACA,KAAA,gBACA,WAAA,CACA,QAAAC,EAAA,QACA,WAAAC,EAAA,OACA,EACA,MAAA,CAIA,OAAA,CACA,KAAA,QACA,QAAA,EACA,EAIA,QAAA,CACA,KAAA,OACA,QAAA,QACA,UAAAC,EAAA,CACA,MAAA,CAAA,QAAA,OAAA,EAAA,SAAAA,CAAA,CACA,CACA,EAIA,aAAA,CACA,KAAA,OACA,QAAA,WACA,EAIA,aAAA,CACA,KAAA,OACA,QAAA,WACA,EACA,WAAA,CACA,KAAA,QACA,QAAA,EACA,EAIA,mBAAA,CACA,KAAA,OACA,QAAA,GACA,EAIA,iBAAA,CACA,KAAA,OACA,QAAA,EACA,CACA,EACA,MAAA,CACA,MAAA,CACA,UAAA,GACA,aAAA,KACA,YAAA,GACA,WAAA,EACA,CACA,EACA,SAAA,CACA,uBAAA,CACA,OAAA,KAAA,WACA,KAAA,mBAAA,KAAA,iBACA,KAAA,kBACA,EACA,OAAA,CACA,MAAA,CAAA,yBAAA,GAAA,KAAA,0BACA,CACA,EACA,SAAA,CACA,KAAA,KAAA,CACA,EACA,QAAA,CAIA,MAAA,CACA,KAAA,SAEA,KAAA,WAAA,KAAA,mBAAA,EAAA,KAAA,gBACA,KAAA,UAAA,IAGA,KAAA,YAAA,GAGA,KAAA,UAAA,EAAA,QAAA,KAAA,GAAA,CACA,EAIA,WAAA,CACA,OAAA,IAAA,eAAAC,GAAA,CACA,MAAAC,EAAAD,EAAA,GAAA,YAAA,MAEA,KAAA,eAAAC,IAEA,KAAA,YACA,KAAA,WAAA,KAAA,mBAAA,EAAA,KAAA,iBAIA,KAAA,QACA,KAAA,WACA,KAAA,eAAA,OACA,KAAA,UAAA,KAKA,KAAA,aAAAA,EAGA,KAAA,WAKA,KAAA,MAAA,aAAA,KAAA,IAAA,YAAA,CAEA,CAAA,CACA,EAIA,eAAA,CACA,OAAA,KAAA,IAAA,cAAA,0BAAA,EAAA,YACA,EAIA,oBAAA,CACA,OAAA,KAAA,IAAA,cAAA,sCAAA,EAAA,YACA,EAIA,SAAA,CACA,KAAA,UAAA,CAAA,KAAA,UAMA,KAAA,MAAA,gBAAA,KAAA,SAAA,CACA,CACA,CACA"}