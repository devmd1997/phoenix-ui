{"version":3,"file":"BaseProgressBar.es.js","sources":["../../../src/components/BaseProgressBar/BaseProgressBar.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"progressBar\"\n    :aria-valuenow=\"progress\"\n    role=\"progressbar\"\n    aria-valuemin=\"0\"\n    aria-valuemax=\"100\"\n    class=\"base-progress-bar\">\n    <div class=\"base-progress-bar__container\">\n      <div\n        ref=\"progressBarProgress\"\n        :style=\"{ width: `${progress}%` }\"\n        class=\"base-progress-bar__progress\" />\n      <div\n        ref=\"progressBarContent\"\n        class=\"base-progress-bar__content\">\n        <div\n          ref=\"progressBarFileName\"\n          class=\"base-progress-bar__file-name\">\n          {{ fileName }}\n          <div\n            v-if=\"showFadeOut\"\n            ref=\"progressBarFadeOut\"\n            :class=\"['base-progress-bar__fade-out',\n                     { 'base-progress-bar__fade-out-hide': fadeOutDarkWidth === 0 }]\" />\n          <div\n            v-if=\"showFadeOut\"\n            :class=\"[\n              'base-progress-bar__fade-out-dark-window',\n              { 'base-progress-bar__fade-out-dark-window-show': showDarkFadeOut },\n            ]\">\n            <div\n              :style=\"{ transform: `translateX(-${fadeOutDarkWidth}px)` }\"\n              class=\"base-progress-bar__fade-out-dark-cover\">\n              <div\n                :style=\"{ transform: `translateX(${fadeOutDarkWidth}px)` }\"\n                class=\"base-progress-bar__fade-out-dark\" />\n            </div>\n          </div>\n        </div>\n        <span\n          v-if=\"fileSize\"\n          class=\"base-progress-bar__file-size\">\n          {{ fileSize }}\n        </span>\n        <base-icon\n          v-if=\"status === 'success'\"\n          class=\"base-progress-bar__status-icon base-progress-bar__status-icon-success\"\n          name=\"success\" />\n        <base-icon\n          v-if=\"status === 'fail'\"\n          :title=\"errorMessage\"\n          class=\"base-progress-bar__status-icon base-progress-bar__status-icon-fail\"\n          name=\"attention\" />\n        <base-icon\n          v-if=\"showRemove\"\n          class=\"base-progress-bar__status-icon base-progress-bar__status-icon-remove\"\n          name=\"remove\"\n          @click.native=\"remove\" />\n      </div>\n    </div>\n    <div\n      v-if=\"status === 'fail' && errorMessage\"\n      class=\"base-progress-bar__error-message\">\n      {{ errorMessage }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport BaseIcon from '../BaseIcon/BaseIcon';\n\n/**\n * Progress bar including file upload features (display filename or file size)\n * and remove functionality\n */\n\nexport default {\n  name: 'BaseProgressBar',\n  components: {\n    BaseIcon,\n  },\n  props: {\n    /**\n     * additional error message\n     */\n    errorMessage: {\n      type: String,\n      default: '',\n    },\n    /**\n     * filename that will be displayed in the bar\n     */\n    fileName: {\n      type: String,\n      default: '',\n    },\n    /**\n     * filesize that will be displayed in the bar\n     */\n    fileSize: {\n      type: String,\n      default: '',\n    },\n    /**\n     * progress of the upload (percentage)\n     * @values 0-100\n     */\n    progress: {\n      type: [Number, String],\n      default: 0,\n      validator(val) {\n        return val >= 0 && val <= 100;\n      },\n    },\n    /**\n     * indicate the success or fail of an upload\n     *   @values success, fail, ''\n     */\n    status: {\n      type: String,\n      default: '',\n      validator(val) {\n        return ['success', 'fail', ''].includes(val);\n      },\n    },\n    /**\n     * show an remove icon\n     */\n    showRemove: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      fadeOutDarkWidth: 30,\n      showFadeOut: true,\n      showDarkFadeOut: false,\n    };\n  },\n  watch: {\n    progress(val) {\n      // check if all of this is even necessary --> fade out is displayed\n      if (this.showFadeOut) {\n        // get the fade out with (currently set with 30px but be flexible)\n        const fadeOutWidth = this.$refs.progressBarFadeOut.clientWidth;\n        // get the width of the progress bar\n        const progressInPixels = Math.ceil((this.$refs.progressBar.clientWidth / 100) * val);\n        // get content padding\n        const progressContent = this.$refs.progressBarContent;\n        const contentStyle = window.getComputedStyle(progressContent);\n        const contentPadding = Number(contentStyle.getPropertyValue('padding-left')\n          .replace('px', ''));\n        // get the position of the fade out element\n        const fadeOutPosition = this.$refs.progressBarFadeOut.offsetLeft + contentPadding;\n        // check if the progress is bigger than fade out position\n        if (progressInPixels >= fadeOutPosition) {\n          this.showDarkFadeOut = true;\n          // if yes calculate how much is the overlap\n          const fadeOutOverlap = progressInPixels - fadeOutPosition;\n          // if the overlap is bigger than the actual fade-out element size\n          // - assume the actual width of fade out element - else set calculated size\n          this.fadeOutDarkWidth = fadeOutOverlap > fadeOutWidth ? 0 : fadeOutWidth - fadeOutOverlap;\n        } else {\n          this.fadeOutDarkWidth = fadeOutWidth;\n          this.showDarkFadeOut = false;\n        }\n      }\n    },\n  },\n  mounted() {\n    if (this.$refs && this.$refs.progressBarFileName) {\n      this.showFadeOut = this.$refs.progressBarFileName.scrollWidth\n        > this.$refs.progressBarFileName.clientWidth;\n    }\n  },\n  methods: {\n    remove() {\n      /**\n       * event triggered on remove icon click\n       *\n       * @event remove-item\n       */\n      this.$emit('remove-item');\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  @import '../../styles/variables';\n\n  .base-progress-bar {\n    .base-progress-bar__container {\n      font-family: inherit;\n      font-size: inherit;\n      position: relative;\n      width: 100%;\n      height: $row-height-small;\n      background-color: $button-header-color;\n      line-height: $row-height-small;\n    }\n\n    .base-progress-bar__progress {\n      transition: width 0.5s;\n      height: 100%;\n      background-color: $uploadbar-color;\n    }\n\n    .base-progress-bar__content {\n      position: absolute;\n      display: flex;\n      align-items: center;\n      top: 0;\n      left: 0;\n      padding: 0 $spacing;\n      overflow: hidden;\n      white-space: nowrap;\n      width: 100%;\n      height: 100%;\n\n      .base-progress-bar__file-name {\n        overflow: hidden;\n        flex: 1 1 auto;\n        position: relative;\n\n        .base-progress-bar__fade-out {\n          content: '';\n          height: 100%;\n          width: $fade-out-width;\n          position: absolute;\n          top: 0;\n          right: 0;\n          background: linear-gradient(to right, rgba(240, 240, 240, 0) , rgba(240, 240, 240, 1));\n          z-index: map-get($zindex, uploadbar);\n          opacity: 1;\n          transition: opacity 0.3s;\n\n          &.base-progress-bar__fade-out-hide {\n            opacity: 0;\n          }\n        }\n\n        .base-progress-bar__fade-out-dark-window {\n          position: absolute;\n          content: \"\";\n          top: 0;\n          right: 0;\n          width: $fade-out-width;\n          height: 100%;\n          overflow: hidden;\n          z-index: 200;\n          opacity: 0;\n          transition: opacity 1s;\n\n          &.base-progress-bar__fade-out-dark-window-show {\n            opacity: 1;\n          }\n        }\n\n        .base-progress-bar__fade-out-dark-cover {\n          position: absolute;\n          content: \"\";\n          top: 0;\n          left: 0;\n          width: $fade-out-width;\n          height: 100%;\n          overflow: hidden;\n          transition: transform 0.8s;\n\n          .base-progress-bar__fade-out-dark {\n            position: absolute;\n            content: \"\";\n            top: 0;\n            left: 0;\n            width: $fade-out-width;\n            height: 100%;\n            background: linear-gradient(to right, rgba(153, 153, 153, 0) , rgba(153, 153, 153, 1));\n            transition: transform 0.8s;\n          }\n        }\n      }\n\n      .base-progress-bar__file-size {\n        margin-left: auto;\n        flex-shrink: 0;\n        left: $spacing;\n      }\n\n      .base-progress-bar__status-icon {\n        height: $icon-medium;\n        width: $icon-medium;\n        flex-shrink: 0;\n        margin-left: $spacing;\n\n        &.base-progress-bar__status-icon-success {\n          fill: white;\n        }\n\n        &.base-progress-bar__status-icon-fail {\n          fill: $warning-color;\n        }\n\n        &.base-progress-bar__status-icon-remove {\n          cursor: pointer;\n          fill: $font-color-third;\n        }\n      }\n    }\n\n    .base-progress-bar__error-message {\n      font-size: $font-size-small;\n      color: $warning-color;\n    }\n  }\n</style>\n"],"names":["_sfc_main","BaseIcon","val","fadeOutWidth","progressInPixels","progressContent","contentStyle","contentPadding","fadeOutPosition","fadeOutOverlap"],"mappings":";;;AA6EA,MAAAA,IAAA;AAAA,EACA,MAAA;AAAA,EACA,YAAA;AAAA,IACA,UAAAC;AAAA,EACA;AAAA,EACA,OAAA;AAAA,IAIA,cAAA;AAAA,MACA,MAAA;AAAA,MACA,SAAA;AAAA,IACA;AAAA,IAIA,UAAA;AAAA,MACA,MAAA;AAAA,MACA,SAAA;AAAA,IACA;AAAA,IAIA,UAAA;AAAA,MACA,MAAA;AAAA,MACA,SAAA;AAAA,IACA;AAAA,IAKA,UAAA;AAAA,MACA,MAAA,CAAA,QAAA,MAAA;AAAA,MACA,SAAA;AAAA,MACA,UAAAC,GAAA;AACA,eAAAA,KAAA,KAAAA,KAAA;AAAA,MACA;AAAA,IACA;AAAA,IAKA,QAAA;AAAA,MACA,MAAA;AAAA,MACA,SAAA;AAAA,MACA,UAAAA,GAAA;AACA,eAAA,CAAA,WAAA,QAAA,EAAA,EAAA,SAAAA,CAAA;AAAA,MACA;AAAA,IACA;AAAA,IAIA,YAAA;AAAA,MACA,MAAA;AAAA,MACA,SAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,OAAA;AACA,WAAA;AAAA,MACA,kBAAA;AAAA,MACA,aAAA;AAAA,MACA,iBAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,OAAA;AAAA,IACA,SAAAA,GAAA;AAEA,UAAA,KAAA,aAAA;AAEA,cAAAC,IAAA,KAAA,MAAA,mBAAA,aAEAC,IAAA,KAAA,KAAA,KAAA,MAAA,YAAA,cAAA,MAAAF,CAAA,GAEAG,IAAA,KAAA,MAAA,oBACAC,IAAA,OAAA,iBAAAD,CAAA,GACAE,IAAA,OAAAD,EAAA,iBAAA,cAAA,EACA,QAAA,MAAA,EAAA,CAAA,GAEAE,IAAA,KAAA,MAAA,mBAAA,aAAAD;AAEA,YAAAH,KAAAI,GAAA;AACA,eAAA,kBAAA;AAEA,gBAAAC,IAAAL,IAAAI;AAGA,eAAA,mBAAAC,IAAAN,IAAA,IAAAA,IAAAM;AAAA,QACA;AACA,eAAA,mBAAAN,GACA,KAAA,kBAAA;AAAA,MAEA;AAAA,IACA;AAAA,EACA;AAAA,EACA,UAAA;AACA,IAAA,KAAA,SAAA,KAAA,MAAA,wBACA,KAAA,cAAA,KAAA,MAAA,oBAAA,cACA,KAAA,MAAA,oBAAA;AAAA,EAEA;AAAA,EACA,SAAA;AAAA,IACA,SAAA;AAMA,WAAA,MAAA,aAAA;AAAA,IACA;AAAA,EACA;AACA;;;;;;;;;;;;;;;;;;;;;;;"}