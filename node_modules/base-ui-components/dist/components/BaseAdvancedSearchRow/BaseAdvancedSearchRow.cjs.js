"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const d=require("../BaseSearch/BaseSearch.cjs.js"),u=require("../BaseIcon/BaseIcon.cjs.js"),p=require("../BaseButton/BaseButton.cjs.js"),f=require("../BaseChipsInputField/BaseChipsInputField.cjs.js"),h=require("../BaseChip/BaseChip.cjs.js"),y=require("../BaseDropDownList/BaseDropDownList.cjs.js"),c=require("../../utils/utils.cjs.js"),m=require("../../mixins/navigateList.cjs.js"),_=require("../../mixins/i18n.cjs.js");require("./BaseAdvancedSearchRow.vue_vue_type_style_index_0_scoped_2ddf8614_lang.cjs.js");require("./BaseAdvancedSearchRow.vue_vue_type_style_index_1_lang.cjs.js");const v=require("../../_virtual/_plugin-vue2_normalizer.cjs.js"),b={name:"BaseAdvancedSearchRow",components:{BaseButton:p.default,BaseDropDownList:y.default,BaseChip:h.default,BaseChipsInputField:f.default,BaseSearch:d.default,BaseIcon:u.default},mixins:[m.default,_.default],props:{searchRowId:{type:String,default:""},isMainSearch:{type:Boolean,default:!1},filterList:{type:Array,default:()=>[],validator:t=>!t.length||t.every(e=>!!e.type&&(!["chips","chipssingle"].includes(e.type)||e.freetext_allowed||!!e.options))},defaultFilter:{type:Object,default:()=>({id:"default",label:"Fulltext",type:"text",options:[]}),validator:t=>!t.length||t.every(e=>!!e.type&&(!["chips","chipssingle"].includes(e.type)||e.freetext_allowed||!!e.options))},appliedFilter:{type:[Object,null],default:null,validator:t=>t===null||!t.length||["id","type","label"].every(e=>Object.keys(t).includes(e))},autocompleteResults:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},language:{type:String,default:""},identifierPropertyName:{type:[Object,String],default:()=>({filter:"id",autocompleteOption:"id",controlledVocabularyOption:"id"})},labelPropertyName:{type:[Object,String],default:()=>({filter:"label",autocompleteOption:"title",controlledVocabularyOption:"label"})},autocompletePropertyNames:{type:Object,default:()=>({label:"label",id:"id",data:"data"}),validator:t=>["label","id","data"].every(e=>Object.keys(t).includes(e))},placeholder:{type:[String,Object],default:"Search and discover"},advancedSearchText:{type:Object,default:()=>({title:"Advanced Search",subtext:"Select a filter",availableOptions:"Available options",addFilter:"Add filter",removeFilter:"Remove filter",selectFilterLabel:"Select filter",searchLabel:"Search for Entries"})},dropDownInfoTexts:{type:Object,default:()=>({autocompleteNoOptions:"No matching options found",autocompleteOngoing:"Autocomplete is being fetched...",autocompleteInitial:"Please start typing or select a filter to see options",chipsNoOptions:"No more options available",chipsMaxOptions:"Please start typing to see options",chipsNoMatch:"No matching options were found",chipsOngoing:"Options are being loaded..."}),validator:t=>["autocompleteNoOptions","autocompleteOngoing","autocompleteInitial","chipsNoOptions","chipsOngoing","chipsMaxOptions","chipsNoMatch"].every(e=>Object.keys(t).includes(e))},maxNumberControlledOptions:{type:Number,default:100},assistiveText:{type:Object,default:()=>({})},applyBoxShadow:{type:Boolean,default:!0},dateFieldDelay:{type:Number,default:0}},data(){return{currentInput:"",filter:null,activeFilter:null,filterFade:{left:!1,right:!0},activeCollection:"",collectionSelect:!1,activeControlledVocabularyEntry:null,activeEntry:null,isActive:!1,currentFilterType:this.appliedFilter?this.appliedFilter.type:this.defaultFilter.type,searchInputElement:null,observer:null,resizeObserver:null,filterSlotName:"pre-input-field"}},computed:{internalRowId(){return this.searchRowId||c.createId()},selectedFilter:{set(t){const e=t.length?t.pop():this.defaultFilter;this.filter={...e,filter_values:this.setFilterValues(e,this.filter)}},get(){return[this.filter]}},displayFilterList(){return this.isMainSearch?this.filterList.filter(t=>t[this.identifierPropertyName.filter]!==this.defaultFilter[[this.identifierPropertyName.filter]]):this.filterList},useAutocompleteFunctionality(){const{type:t}=this.filter;return t==="text"||t==="chips"&&this.filter.freetext_allowed},selectedOptions:{set(t){this.$set(this.filter,"filter_values",[...t])},get(){return this.filter.type.includes("chips")?this.filter&&this.filter.filter_values?[...this.filter.filter_values]:[]:[]}},controlledVocabularyOptions(){if(this.filter.type==="chips"&&!this.filter.freetext_allowed){const t=this.filterList.find(e=>e[this.identifierPropertyName.filter]===this.filter[this.identifierPropertyName.filter]);return t?t.options:[]}return[]},displayedOptions(){if(this.controlledVocabularyOptions){let t=[].concat(this.controlledVocabularyOptions);return this.filter.filter_values&&this.filter.filter_values.length&&(t=t.filter(e=>!this.filter.filter_values.map(r=>r[this.identifierPropertyName.controlledVocabularyOption]).includes(e[this.identifierPropertyName.controlledVocabularyOption]))),this.currentInput&&(t=t.filter(e=>e[this.labelPropertyName.filter].toLowerCase().includes(this.currentInput.toLowerCase()))),c.sort(t,this.labelPropertyName.controlledVocabularyOption,!1,this.getLangLabel)}return[]},resultListInt(){if(this.useAutocompleteFunctionality){let t=this.autocompleteResults;if(this.filter[this.identifierPropertyName.filter]!==this.defaultFilter[this.identifierPropertyName.filter]&&(t=t.filter(e=>e[this.autocompletePropertyNames.id]===this.filter[this.identifierPropertyName.filter]||this.filter.subsets&&this.filter.subsets.length&&this.filter.subsets.includes(e[this.autocompletePropertyNames.id]))),t=t.filter(e=>e[this.autocompletePropertyNames.data]&&e[this.autocompletePropertyNames.data].length),this.selectedOptions&&this.selectedOptions.length){const e=this.selectedOptions.map(r=>r[this.identifierPropertyName.autocompleteOption]);return t.map(r=>({data:r[this.autocompletePropertyNames.data].filter(i=>!e.includes(i[this.identifierPropertyName.autocompleteOption])),[this.autocompletePropertyNames.id]:r[this.autocompletePropertyNames.id],[this.autocompletePropertyNames.label]:r[this.autocompletePropertyNames.label]}))}return t}return[]},consolidatedResultList(){return this.resultListInt.reduce((t,e)=>(this.$set(t,e[this.autocompletePropertyNames.id],e[this.autocompletePropertyNames.data]),t),{})},filterHasValues(){return this.filter[this.identifierPropertyName.filter]!==this.defaultFilter[this.identifierPropertyName.filter]||c.hasData(this.filter.filter_values)},searchType(){if(this.filter){const{type:t}=this.filter;return t==="chips"&&!this.filter.freetext_allowed?"controlled":t}return"text"}},watch:{filter:{handler(t){JSON.stringify(t)!==JSON.stringify(this.appliedFilter)&&this.$emit("update:applied-filter",{...t})},deep:!0},defaultFilter:{handler(t){(!this.filter||this.filter.id==="default")&&(this.filter={...t,filter_values:this.setFilterValues(t)})},immediate:!0},appliedFilter:{handler(t){if(JSON.stringify(t)!==JSON.stringify(this.filter)){const e=t||this.defaultFilter;this.filter={...e,filter_values:e.filter_values||this.setFilterValues(e)},t&&t.filter_values?t.type.includes("date")?this.currentInput=t.filter_values:t.type==="text"?[this.currentInput]=t.filter_values:this.currentInput="":this.currentInput=""}},immediate:!0},currentInput(t){this.useAutocompleteFunctionality&&this.$emit("fetch-autocomplete-results",{input:t,filter:this.filter})},isActive(t){t&&(this.filterFade={left:!1,right:!0}),!t&&this.filter.type==="chips"&&this.currentInput&&this.currentInput.trim()?this.filter.freetext_allowed&&(!this.selectedOptions||!this.selectedOptions.some(e=>!e[this.identifierPropertyName.autocompleteOption]&&e[this.labelPropertyName.autocompleteOption]===this.currentInput))?this.addOption({[this.labelPropertyName.autocompleteOption]:this.currentInput}):this.resetAllInput():!t&&this.filter.type==="text"&&this.currentInput&&this.filter.filter_values.join()!==this.currentInput&&this.addOption(this.currentInput),this.$emit("is-active",t)}},mounted(){this.getSearchInputElement(),this.initObservers()},updated(){this.$refs.filterBox&&this.$refs.filterBox.addEventListener("scroll",this.calcFadeOut)},beforeDestroy(){this.resizeObserver&&this.resizeObserver.unobserve(this.$refs.advancedSearchRow)},destroyed(){this.$refs.filterBox&&this.$refs.filterBox.removeEventListener("scroll",this.calcFadeOut)},methods:{addFilterRow(){this.$emit("add-filter-row",{filter:this.filter,input:this.currentInput})},removeFilter(){this.isMainSearch?(this.filter={...this.defaultFilter,filter_values:this.setFilterValues(this.defaultFilter)},this.resetAllInput()):this.$emit("remove-filter",this.filter)},selectFilter(t){if(t&&this.filter[this.identifierPropertyName.filter]!==t[this.identifierPropertyName.filter]){const e=this.filter,r=this.currentInput;this.filter={...t,filter_values:this.setFilterValues(t,e)},this.resetAllInput(),this.activeFilter=null,["text","chips"].includes(t.type)&&["text","chips"].includes(e.type)&&!(e.type==="text"&&e.filter_values[0]===r)&&(this.currentInput=r,(t.type==="text"||t.type==="chips"&&t.freetext_allowed)&&this.currentInput&&!this.autocompleteResults.some(i=>i.filter_id===t.id)&&this.$emit("fetch-autocomplete-results",{input:this.currentInput,filter:this.filter})),this.filter.type.includes("date")&&(this.currentInput=this.filter.filter_values),this.filter.type==="chipssingle"&&this.addOption(this.filter.options[0])}this.searchInputElement&&this.searchInputElement.focus()},navigateFilters(t){if(this.filterList.length&&this.isActive&&this.$refs.dropDown){const e=this.filterList.indexOf(this.activeFilter),r=this.$refs.dropDown.$el;this.$refs.filterOption&&r.scrollTop!==0&&this.$refs.dropDown.$el.scrollTo({top:0});const i=t.key==="ArrowDown";this.activeFilter=this.navigate(this.filterList,i,e,!0)}},setCollection(t){this.activeCollection=this.activeEntry?t:""},addOption(t,e=""){const r=this.activeCollection||e||this.defaultFilter[this.identifierPropertyName.filter];if(this.useAutocompleteFunctionality&&t[this.identifierPropertyName.autocompleteOption]&&this.filter[this.identifierPropertyName.filter]!==r&&!(this.filter.subsets&&this.filter.subsets.length&&this.filter.subsets.includes(r))){const i=this.filterList.find(l=>l[this.identifierPropertyName.filter]===(this.activeCollection||e))||this.defaultFilter,s=i[this.identifierPropertyName.filter]===this.defaultFilter[this.identifierPropertyName.filter]?[].concat(t[this.labelPropertyName.autocompleteOption]):[].concat(t),a=this.filter.filter_values&&this.filter.filter_values.length===1&&typeof this.filter.filter_values[0]=="string"?[{[this.labelPropertyName.autocompleteOption]:this.filter.filter_values[0]}]:[];this.filter={...i,filter_values:a.concat(s)}}else this.selectedOptions=this.filter.filter_values.concat(t);this.filter.type!=="text"&&(this.filter.type!=="chips"||this.filter.freetext_allowed||!this.displayedOptions.length)?this.resetAllInput():this.activeControlledVocabularyEntry=null,(this.filter.type!=="chips"||this.filter.freetext_allowed)&&(this.isActive=!1)},selectOptionOnKeyEnter(){if(this.filter.type==="chips"&&this.activeControlledVocabularyEntry)this.addOption(this.activeControlledVocabularyEntry);else if(this.useAutocompleteFunctionality&&this.activeEntry)this.addOption(this.activeEntry);else if(this.filter.type==="text"){const t=[].concat(this.currentInput);JSON.stringify(this.filter.filter_values)!==JSON.stringify(t)?(this.$set(this.filter,"filter_values",[].concat(this.currentInput)),this.isActive=!1):this.isActive=!this.isActive}else this.filter.type==="chips"&&this.filter.freetext_allowed&&this.currentInput&&this.currentInput.trim()&&(!this.selectedOptions||!this.selectedOptions.some(t=>!t[this.identifierPropertyName.autocompleteOption]&&t[this.labelPropertyName.autocompleteOption]===this.currentInput))?this.addOption({[this.labelPropertyName.autocompleteOption]:this.currentInput}):this.currentInput||(this.isActive=!this.isActive)},handleKeyDownEvent(t){const{key:e}=t;["Tab","Enter"," ","Shift"].includes(e)?e===" "&&!this.currentInput&&(this.isActive=!this.isActive,t.preventDefault()):this.isActive=!0},openDropDown(){this.isActive=!0,this.searchInputElement&&this.searchInputElement.focus()},navigateDropDown(t){t.preventDefault();const e=t.key==="ArrowDown";if(this.controlledVocabularyOptions&&this.controlledVocabularyOptions.length&&(t.key==="ArrowDown"||t.key==="ArrowUp")){const r=this.displayedOptions.indexOf(this.activeControlledVocabularyEntry);this.activeControlledVocabularyEntry=this.navigate(this.displayedOptions,e,r,!0)}else this.navigateAutocomplete(t,e)},navigateAutocomplete(t,e){if(t.preventDefault(),this.resultListInt.length){const{key:r}=t;if(r==="ArrowDown"||r==="ArrowUp"){this.activeCollection||(this.activeCollection=this.resultListInt[0][this.autocompletePropertyNames.id]);const i=this.resultListInt.map(o=>o[this.autocompletePropertyNames.id]).indexOf(this.activeCollection);let s=this.consolidatedResultList[this.activeCollection];const a=e?1:-1,l=s.indexOf(this.activeEntry),n=this.isWithinArrayLimit(this.resultListInt,e,i+a);if(!this.collectionSelect&&this.isWithinArrayLimit(s,e,l+a))this.activeEntry=this.navigate(s,e,l);else if(!this.collectionSelect&&!e&&i===0&&l===0)this.activeEntry=null;else if(n){this.activeCollection=this.resultListInt[i+a][this.autocompletePropertyNames.id],s=this.consolidatedResultList[this.activeCollection];const o=e||this.collectionSelect?0:s.length-1;this.activeEntry=s[o]}else!n&&i===this.resultListInt.length-1&&l===s.length-1?(this.activeCollection=this.resultListInt[0][this.autocompletePropertyNames.id],s=this.consolidatedResultList[this.activeCollection],[this.activeEntry]=s):!n&&i===0&&l===-1&&(this.activeCollection=this.resultListInt[this.resultListInt.length-1][this.autocompletePropertyNames.id],s=this.consolidatedResultList[this.activeCollection],[this.activeEntry]=s.slice(-1))}else r==="ArrowLeft"?this.collectionSelect=!0:r==="ArrowRight"&&(this.collectionSelect=!1)}},handleDropDownOnTabKey(t){const e=this.$el.getElementsByTagName("input");if(e){const r=Array.from(e),i=r.indexOf(t.target);(!t.shiftKey&&i>=r.length-1||t.shiftKey&&i<=0)&&(this.isActive=!1)}},handleDateInput(t){this.filter.type.includes("date")&&JSON.stringify(t)!==JSON.stringify(this.filter.filter_values)&&(this.currentInput=t,this.$set(this.filter,"filter_values",this.currentInput),this.isActive=!1)},setFilterValues(t,e={}){const r=e.filter_values,{type:i}=t,s=t.freetext_allowed;return i==="date"?e.type&&e.type.includes("date")&&r?r.date_from||r.date_to:"":i==="daterange"?e.type.includes("date")?{date_from:r&&(r.date_from||r)||"",date_to:r&&r.to?r.to:""}:{date_from:"",date_to:""}:i==="chips"&&s&&e.type==="chips"&&e.freetext_allowed?t.subsets&&t.subsets.includes(e[this.identifierPropertyName.filter])?r:r&&r.length?r.filter(a=>!a[this.identifierPropertyName.autocompleteOption]):[]:e.type==="text"&&r&&r.length&&!!r[0]&&i==="chips"&&s?[{[this.labelPropertyName.autocompleteOption]:r[0]}]:[]},resetAllInput(){this.currentInput="",this.activeEntry=null,this.activeCollection="",this.activeControlledVocabularyEntry=null},calcFadeOut(t){const e=t.target,r=e.scrollLeft,i=e.scrollWidth-e.clientWidth;this.filterFade={left:r!==0,right:r!==i}},onTab(t){t.shiftKey||(this.isActive=!1)},initObservers(){const t=new MutationObserver(this.filterChangeObserverAction);t.observe(this.$refs.advancedSearchRow,{subtree:!0,childList:!0}),this.observer=t;const e=new ResizeObserver(this.resizeActions);e.observe(this.$refs.advancedSearchRow),this.resizeObserver=e},filterChangeObserverAction(){this.getSearchInputElement(),this.filter.type!==this.currentFilterType&&this.isActive&&this.searchInputElement&&(this.searchInputElement.focus(),this.currentFilterType=this.filter.type)},resizeActions(){const t=this.$refs.advancedSearchRow,e=this.$refs.baseSearch;if(e){const r=e.$el.clientWidth;this.$el.style.setProperty("--col-number",Math.floor((r-r/4)/180)||1)}if(t){const r=t.clientWidth;this.filterSlotName=r>=500?"pre-input-field":"input-field-addition-before"}},getSearchInputElement(){const t=document.getElementsByTagName("input");t&&t.length&&(this.searchInputElement=Array.from(t).find(e=>e.id.includes("search-input")&&e.id.includes(this.searchRowId)))}}};var g=function(){var e=this,r=e._self._c;return r("div",{ref:"advancedSearchRow",staticClass:"base-advanced-search-row",on:{click:e.openDropDown}},[r("BaseSearch",e._b({ref:"baseSearch",class:["base-advanced-search-row__search",{"base-advanced-search-row__search__shadow":e.applyBoxShadow}],attrs:{id:"search-input-"+e.internalRowId,"show-pre-input-icon":e.isMainSearch&&e.filter[e.identifierPropertyName.filter]===e.defaultFilter[e.identifierPropertyName.filter],label:e.getI18nTerm(e.getLangLabel(e.advancedSearchText.searchLabel)),type:e.searchType,"selected-chips":e.selectedOptions,loadable:e.filter.type==="text"||e.filter.type==="chips","is-loading":e.isLoading,placeholder:e.placeholder,"drop-down-list-id":"autocomplete-options-"+e.internalRowId,language:e.language,"identifier-property-name":e.useAutocompleteFunctionality?e.identifierPropertyName.autocompleteOption:e.identifierPropertyName.controlledVocabularyOption,"label-property-name":e.useAutocompleteFunctionality?e.labelPropertyName.autocompleteOption:e.labelPropertyName.controlledVocabularyOption,"is-active":e.isActive,"set-focus-on-active":!1,clearable:!1,"assistive-text":e.assistiveText,"date-field-delay":e.dateFieldDelay},on:{"update:selectedChips":function(i){e.selectedOptions=i},"update:selected-chips":function(i){e.selectedOptions=i},"clicked-outside":function(i){e.isActive=!1},click:function(i){e.isActive=!0},keydown:[e.handleKeyDownEvent,function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"up",38,i.key,["Up","ArrowUp"])&&e._k(i.keyCode,"down",40,i.key,["Down","ArrowDown"])&&e._k(i.keyCode,"right",39,i.key,["Right","ArrowRight"])&&e._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&i.button!==2||"button"in i&&i.button!==0?null:e.navigateDropDown.apply(null,arguments)},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"tab",9,i.key,"Tab")?null:e.handleDropDownOnTabKey.apply(null,arguments)},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.selectOptionOnKeyEnter.apply(null,arguments)},function(i){if(!i.type.indexOf("key")&&e._k(i.keyCode,"esc",27,i.key,["Esc","Escape"]))return null;e.isActive=!1}],"value-validated":e.handleDateInput},scopedSlots:e._u([{key:e.filterSlotName,fn:function(){return[r("BaseChipsInputField",{class:["base-advanced-search-row__first-column",{"base-advanced-search-row__first-column__small":e.filterSlotName==="input-field-addition-before"},"base-advanced-search-row__filter-input",{hide:e.isMainSearch&&e.filter[e.identifierPropertyName.filter]===e.defaultFilter[e.identifierPropertyName.filter]},{"base-advanced-search-row__filter-input__date":e.filter.type.includes("date")}],attrs:{id:"filter-select-"+e.internalRowId,"selected-list":e.selectedFilter,"allow-multiple-entries":!1,"allow-unknown-entries":!1,"allow-dynamic-drop-down-entries":!1,"linked-list-option":e.activeFilter?`filter-option-${e.activeFilter[e.identifierPropertyName.filter]}`:null,"use-form-field-styling":!1,"show-input-border":!1,"show-label":!1,label:e.getI18nTerm(e.getLangLabel(e.advancedSearchText.selectFilterLabel)),language:e.language,"drop-down-list-id":"filter-options-"+e.internalRowId,"identifier-property-name":e.identifierPropertyName.filter,"label-property-name":e.labelPropertyName.filter,"input-class":e.filterSlotName==="input-field-addition-before"?"":"base-advanced-search-row__input-field"},on:{"update:selectedList":function(i){e.selectedFilter=i},"update:selected-list":function(i){e.selectedFilter=i},click:function(i){e.isActive=!0},keydown:[e.handleKeyDownEvent,function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"tab",9,i.key,"Tab")?null:e.handleDropDownOnTabKey.apply(null,arguments)},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.selectFilter(e.activeFilter)},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"up",38,i.key,["Up","ArrowUp"])&&e._k(i.keyCode,"down",40,i.key,["Down","ArrowDown"])?null:e.navigateFilters.apply(null,arguments)}]},scopedSlots:e._u([{key:"chip",fn:function({entry:i}){return[r("span",{key:"chip-"+i.idInt,staticClass:"base-advanced-search-row__selected-filter-label",attrs:{id:i.idInt}},[e._v(" "+e._s(`#${e.getLangLabel(i[e.labelPropertyName.filter],!0)}`)+" ")])]}}])})]},proxy:!0},{key:"post-input-field",fn:function(){return[!e.isMainSearch||e.filterHasValues?r("button",{class:["base-advanced-search-row__icon-button",{"base-advanced-search-row__icon-button__date":e.filter.type.includes("date")}],on:{keydown:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"tab",9,i.key,"Tab")?null:e.onTab.apply(null,arguments)},click:function(i){return i.stopPropagation(),i.preventDefault(),e.removeFilter.apply(null,arguments)}}},[r("BaseIcon",{staticClass:"base-advanced-search-row__search-row-icon",attrs:{title:e.getI18nTerm(e.getLangLabel(e.advancedSearchText.removeFilter)),name:"remove"}})],1):e._e()]},proxy:!0},{key:"below-input",fn:function(){return[e.isActive?r("BaseDropDownList",{ref:"dropDown",staticClass:"base-advanced-search-row__drop-down-body",attrs:{"drop-down-options":e.resultListInt,"active-option":{[e.autocompletePropertyNames.id]:e.activeCollection},"list-id":"autocomplete-options-"+e.internalRowId,"active-styled":!1,"has-sub-options":!0,"display-as-drop-down":!1,"use-custom-option-active-background-color":!0,language:e.language,"identifier-property-name":e.autocompletePropertyNames.id,"label-property-name":e.autocompletePropertyNames.data,"list-body-style":{"max-height":"400px","overflow-y":"auto"}},nativeOn:{touchstart:function(i){i.stopPropagation()},click:function(i){i.stopPropagation()}},scopedSlots:e._u([{key:"before-list",fn:function(){return[r("div",{class:["base-advanced-search-row__above-list-area","base-advanced-search-row__area-padding",{"base-advanced-search-row__above-list-area-filters":e.filter.type==="text"||e.filter.type==="chips"}]},[r("div",{staticClass:"base-advanced-search-row__filter-area-wrapper"},[r("div",{staticClass:"base-advanced-search-row__first-column base-advanced-search-row__filter-area"},[r("div",{staticClass:"base-advanced-search-row__filter-area-header"},[r("div",{staticClass:"base-advanced-search-row__filter-text"},[e._v(" "+e._s(e.getI18nTerm(e.getLangLabel(e.advancedSearchText.title)))+" ")]),r("div",{staticClass:"base-advanced-search-row__filter-subtext"},[e._v(" "+e._s(e.getI18nTerm(e.getLangLabel(e.advancedSearchText.subtext)))+" ")])]),r("span",{staticClass:"base-advanced-search-row__filter-area-close",on:{keydown:function(i){if(!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter"))return null;e.isActive=!1},click:function(i){e.isActive=!1}}},[r("BaseIcon",{staticClass:"rotate-180 base-advanced-search-row__filter-area-close-icon",attrs:{name:"drop-down"}})],1)]),r("div",{class:["base-advanced-search-row__columns","base-advanced-search-row__filter-list-wrapper",{"base-advanced-search-row__filter-list-wrapper__fade-right":e.filterFade.right},{"base-advanced-search-row__filter-list-wrapper__fade-left":e.filterFade.left}]},[r("ul",{ref:"filterBox",staticClass:"base-advanced-search-row__filter-list",attrs:{id:"filter-options-"+e.internalRowId,role:"listbox"}},e._l(e.displayFilterList,function(i,s){return r("li",{key:s,ref:"filterOption",refInFor:!0,staticClass:"base-advanced-search-row__filter base-advanced-search-row__column-item",class:[{"base-advanced-search-row__filter-active":e.activeFilter===i},{"base-advanced-search-row__filter-selected":e.filter&&e.filter[e.identifierPropertyName.filter]===i[e.identifierPropertyName.filter]}],attrs:{id:`filter-option-${i[e.identifierPropertyName.filter]}`,"aria-selected":(e.filter&&e.filter[e.identifierPropertyName.filter]===i[e.identifierPropertyName.filter]).toString(),tabindex:"-1",role:"option"},on:{keydown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:(a.stopPropagation(),e.selectFilter(i))},click:function(a){return a.stopPropagation(),e.selectFilter(i)}}},[e._v(" "+e._s(`#${i[e.labelPropertyName.filter]}`)+" ")])}),0)])])])]},proxy:!0},{key:"option",fn:function(i){return[!e.filter||e.useAutocompleteFunctionality?r("div",{staticClass:"base-advanced-search-row__autocomplete-body"},[i.option[e.autocompletePropertyNames.data].length?r("div",{class:["base-advanced-search-row__first-column","base-advanced-search-row__autocomplete-collection"]},[r("div",{staticClass:"base-advanced-search-row__autocomplete-collection-text"},[e._v(" "+e._s(i.option[e.autocompletePropertyNames.label])+" ")])]):e._e(),r("BaseDropDownList",{staticClass:"base-advanced-search-row__autocomplete-options",attrs:{"drop-down-options":i.option[e.autocompletePropertyNames.data],"active-option":e.activeEntry,"display-as-drop-down":!1,"list-id":"autocomplete-options-"+e.internalRowId,language:e.language,"identifier-property-name":e.identifierPropertyName.autocompleteOption,"label-property-name":e.labelPropertyName.autocompleteOption},on:{"update:activeOption":function(s){e.activeEntry=s},"update:active-option":[function(s){e.activeEntry=s},function(s){return e.setCollection(i.option[e.autocompletePropertyNames.id])}],"update:selected-option":function(s){return e.addOption(s,i.option[e.autocompletePropertyNames.id])}}})],1):e._e()]}},e.filter.type==="chips"&&!e.filter.freetext_allowed?{key:"after-list",fn:function(){return[r("div",{staticClass:"base-advanced-search-row__above-list-area base-advanced-search-row__chips-area base-advanced-search-row__area-padding"},[r("div",{class:["base-advanced-search-row__chips-row",{"base-advanced-search-row__chips-row__no-options":e.filter.type==="chips"&&!e.displayedOptions.length}]},[r("div",{staticClass:"base-advanced-search-row__controlled-options-title base-advanced-search-row__first-column"},[e._v(" "+e._s(e.getI18nTerm(e.getLangLabel(e.advancedSearchText.availableOptions)))+" ")]),e.controlledVocabularyOptions&&e.displayedOptions.length&&(e.displayedOptions.length<=e.maxNumberControlledOptions||e.currentInput&&e.currentInput.length>=4)?r("ul",{staticClass:"base-advanced-search-row__chips-list base-advanced-search-row__columns",attrs:{role:"listbox"}},e._l(e.displayedOptions,function(i){return r("li",{key:i[e.identifierPropertyName.controlledVocabularyOption],staticClass:"base-advanced-search-row__column-item",attrs:{value:i[e.labelPropertyName.controlledVocabularyOption],"aria-selected":(e.activeControlledVocabularyEntry&&i[e.identifierPropertyName.controlledVocabularyOption]===e.activeControlledVocabularyEntry[e.identifierPropertyName.controlledVocabularyOption]||!1).toString(),role:"option",tabindex:"0"},on:{mouseenter:function(s){e.activeControlledVocabularyEntry=i},focusin:function(s){e.activeControlledVocabularyEntry=i},mouseleave:function(s){e.activeControlledVocabularyEntry=null},focusout:function(s){e.activeControlledVocabularyEntry=null}}},[r("BaseChip",{staticClass:"base-advanced-search-row__option-chip",attrs:{"is-removable":!1,entry:e.getLangLabel(i[e.labelPropertyName.controlledVocabularyOption]),"chip-active":e.activeControlledVocabularyEntry&&i[e.identifierPropertyName.controlledVocabularyOption]===e.activeControlledVocabularyEntry[e.identifierPropertyName.controlledVocabularyOption]},on:{clicked:function(s){return e.addOption(i)}}})],1)}),0):e.isLoading?r("div",{staticClass:"base-advanced-search-row__no-options base-advanced-search-row__area-padding"},[e._v(" "+e._s(e.getI18nTerm(e.getLangLabel(e.dropDownInfoTexts.chipsOngoing,!0)))+" ")]):e.displayedOptions.length>e.maxNumberControlledOptions&&(!e.currentInput||e.currentInput.length<4)?r("div",{staticClass:"base-advanced-search-row__no-options base-advanced-search-row__area-padding"},[e._v(" "+e._s(e.getI18nTerm(e.getLangLabel(e.dropDownInfoTexts.chipsMaxOptions,!0)))+" ")]):e.currentInput&&e.currentInput.length&&!e.displayedOptions.length?r("div",{staticClass:"base-advanced-search-row__no-options base-advanced-search-row__area-padding"},[e._v(" "+e._s(e.getI18nTerm(e.getLangLabel(e.dropDownInfoTexts.chipsNoMatch,!0)))+" ")]):e.displayedOptions.length?e._e():r("div",{staticClass:"base-advanced-search-row__no-options base-advanced-search-row__area-padding"},[e._v(" "+e._s(e.getI18nTerm(e.getLangLabel(e.dropDownInfoTexts.chipsNoOptions,!0)))+" ")])])])]},proxy:!0}:null,{key:"no-options",fn:function(){return[e.useAutocompleteFunctionality?r("div",{class:["base-advanced-search-row__no-options",{"base-advanced-search-row__no-options-hidden":!e.useAutocompleteFunctionality}]},[!e.currentInput||typeof e.currentInput=="string"&&!e.currentInput.trim()?r("div",[e._v(" "+e._s(e.getI18nTerm(e.getLangLabel(e.dropDownInfoTexts.autocompleteInitial,!0)))+" ")]):e.isLoading?r("div",[e._v(" "+e._s(e.getI18nTerm(e.getLangLabel(e.dropDownInfoTexts.autocompleteOngoing,!0)))+" ")]):r("div",[e._v(" "+e._s(e.getI18nTerm(e.getLangLabel(e.dropDownInfoTexts.autocompleteNoOptions,!0)))+" ")])]):e._e()]},proxy:!0}],null,!0)}):e._e()]},proxy:!0}],null,!0),model:{value:e.currentInput,callback:function(i){e.currentInput=i},expression:"currentInput"}},"BaseSearch",e.$listeners,!1)),e.isMainSearch?r("BaseButton",{class:["base-advanced-search-row__add-filter-button",{"base-advanced-search-row__add-filter-button__shadow":e.applyBoxShadow}],attrs:{icon:"plus","button-style":"row","icon-position":"right"},on:{clicked:e.addFilterRow},nativeOn:{click:function(i){i.stopPropagation()}},scopedSlots:e._u([{key:"text",fn:function(){return[r("span",{staticClass:"base-advanced-search-row__add-filter-button__text"},[e._v(" "+e._s(e.getI18nTerm(e.getLangLabel(e.advancedSearchText.addFilter)))+" ")])]},proxy:!0}],null,!1,2574446168)}):e._e()],1)},w=[],O=v.default(b,g,w,!1,null,"2ddf8614",null,null);const I=O.exports;exports.default=I;
//# sourceMappingURL=BaseAdvancedSearchRow.cjs.js.map
