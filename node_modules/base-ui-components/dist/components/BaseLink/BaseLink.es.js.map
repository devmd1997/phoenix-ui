{"version":3,"file":"BaseLink.es.js","sources":["../../../src/components/BaseLink/BaseLink.vue"],"sourcesContent":["<template>\n  <component\n    :is=\"renderAs\"\n    v-click-outside=\"() => closeTooltip()\"\n    :tabindex=\"source || hasValidUrl || (source && type) || tooltip.length ? 0 : null\"\n    :role=\"tooltip.length ? 'button' : null\"\n    :href=\"source || hasValidUrl ? source || url : null\"\n    :to=\"vueRouterAvailable && source && !type ? '/' + source : null\"\n    :target=\"hasValidUrl && externalLinkTarget === '_blank' ? '_blank' : null\"\n    :title=\"source || hasValidUrl || (source && type) ? value : null\"\n    :class=\"[\n      'base-link',\n      {\n        'base-link--external': hasValidUrl,\n        'base-link--internal': source && !type,\n        'base-link--chip': source && type,\n        'base-link--tooltip': tooltip.length || tooltipAsync.length,\n        'base-link--active': showTooltip,\n        'base-link--space-after': spaceAfter,\n      },\n    ]\"\n    @click=\"source && type ? { click: chipClicked } : {}\">\n    <template\n      v-if=\"!tooltip.length && !tooltipAsync.length\">\n      {{ value }}\n    </template>\n\n    <!-- (i) tooltip -->\n    <template\n      v-if=\"(tooltip.length && !source) || (tooltipAsync.length && !source)\">\n      <span\n        class=\"base-link__label\"\n        @keydown.enter.prevent=\"tooltip.length ? { click: tooltipClicked } : {}\"\n        @click=\"tooltipClicked\">\n        {{ value }}\n        <span\n          ref=\"icon\"\n          class=\"base-link__icon\">\n          <BaseIcon\n            v-show=\"!isLoading\"\n            name=\"information\" />\n        </span>\n\n        <span\n          v-if=\"isLoading\"\n          class=\"base-link__loader\">\n          <BaseLoader\n            v-if=\"isLoading\" />\n        </span>\n      </span>\n\n      <BaseTooltip\n        v-if=\"showTooltip\"\n        :attach-to=\"$refs.icon\"\n        :styles=\"tooltipStyles\">\n        <!-- @slot slot to inject content  -->\n        <slot\n          name=\"tooltip\"\n          :item=\"tooltip\">\n          <span\n            v-if=\"tooltip.label\"\n            class=\"base-tooltip__label\">\n            {{ tooltip.label }}\n          </span>\n\n          <div\n            v-for=\"(item, index) in tooltip\"\n            :key=\"index\"\n            class=\"base-tooltip__row\">\n            {{ item.label }}:\n            <template v-if=\"item.url\">\n              <a\n                :href=\"item.url\"\n                :title=\"item.value\"\n                class=\"base-link--external\">\n                {{ item.value }}\n              </a>\n            </template>\n            <!-- eslint-disable -->\n            <template v-else>{{ item.value }}</template>\n            <!-- eslint-enable -->\n          </div>\n        </slot>\n      </BaseTooltip>\n    </template>\n  </component>\n</template>\n\n<script>\n/**\n * component to display different type of links\n * eg.: internal, external, tooltip, chip\n */\n\nimport ClickOutside from 'vue-click-outside';\n\nexport default {\n  name: 'BaseLink',\n  components: {\n    BaseIcon: () => import('../BaseIcon/BaseIcon').then(m => m.default || m),\n    BaseTooltip: () => import('../BaseTooltip/BaseTooltip').then(m => m.default || m),\n    BaseLoader: () => import('../BaseLoader/BaseLoader').then(m => m.default || m),\n  },\n  directives: {\n    ClickOutside,\n  },\n  props: {\n    /**\n     * specify how link element should be rendered - this needs to be a\n     * valid vue link component (e.g. `RouterLink`, `NuxtLink`) and vue-router\n     * is necessary\n     */\n    renderLinkAs: {\n      type: String,\n      default: 'RouterLink',\n    },\n    /**\n     * specify external link target\n     * @values _blank, _self\n     */\n    externalLinkTarget: {\n      type: String,\n      default: '_blank',\n      validator: val => (val === '_blank' || val === '_self'),\n    },\n    /**\n     * tooltip content\n     * by default a list (label: value) is rendered\n     * structure:\n     * `[{ label: 'label', value: 'value', url: '#' }]`\n     * or use #tooltip to customize the content\n     */\n    tooltip: {\n      type: Array,\n      default: () => [],\n    },\n    /**\n     * async tooltip content\n     * if set, event `@tooltip-clicked` with this object will be emitted\n     */\n    tooltipAsync: {\n      type: Array,\n      default: () => [],\n    },\n    /**\n     * additional tooltip styles\n     * **caveat**: properties `top`, `left`, `right` will be overwritten due position calculation\n     */\n    tooltipStyles: {\n      type: Object,\n      default: () => ({}),\n    },\n    /**\n     * internal identifier to route to\n     */\n    source: {\n      type: String,\n      default: '',\n    },\n    /**\n     * external url to link to\n     */\n    url: {\n      type: String,\n      default: '',\n    },\n    /**\n     * label of the entry\n     */\n    value: {\n      type: String,\n      default: '',\n    },\n    /**\n     * used in combination with property `source` to render chip.\n     * `type` identifies source type for chip click-event\n     * eg: keyword | skill | object\n     */\n    type: {\n      type: String,\n      default: '',\n    },\n    /**\n     * add a space \" \" after element\n     * useful for link-type tooltip in lists\n     */\n    spaceAfter: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      isLoading: false,\n      scrollResizeTimeout: null,\n      showTooltip: false,\n    };\n  },\n  computed: {\n    vueRouterAvailable() {\n      return !!this.$router;\n    },\n    /**\n     * render component as span | a | button\n     * @returns {string}\n     */\n    renderAs() {\n      let tag = 'span';\n\n      if (this.hasValidUrl) {\n        tag = 'a';\n      }\n\n      if (this.source) {\n        tag = this.vueRouterAvailable ? this.renderLinkAs : 'a';\n      }\n\n      if (this.source && this.type) {\n        tag = 'button';\n      }\n\n      return tag;\n    },\n    hasValidUrl() {\n      // check if url is set and includes a protocol (eg. 'http://', 'https://'), 'mailto:' or 'tel:'\n      return this.url\n        && (this.url.match(/^([a-z][a-z0-9+\\-.]*:\\/\\/)/)\n            || this.url.match(/^mailto:/)\n            || this.url.match(/^tel:/));\n    },\n  },\n  watch: {\n    tooltip(val) {\n      if (val) {\n        this.isLoading = false;\n        this.showTooltip = true;\n      }\n    },\n  },\n  mounted() {\n    window.addEventListener('scroll', this.scrollResize);\n    window.addEventListener('resize', this.scrollResize);\n  },\n  destroyed() {\n    window.removeEventListener('scroll', this.scrollResize);\n    window.removeEventListener('resize', this.scrollResize);\n  },\n  methods: {\n    chipClicked() {\n      /**\n       * @event chip-clicked\n       * @property {string} source - internal identifier\n       * @property {string} type - source type for chip click-event\n       */\n      this.$emit('chip-clicked', { source: this.source, type: this.type });\n    },\n    async tooltipClicked() {\n      if (this.tooltip.length) {\n        this.showTooltip = !this.showTooltip;\n        return;\n      }\n\n      if (this.tooltipAsync.length) {\n        this.isLoading = true;\n        /**\n         * @event tooltip-clicked\n         * @param {Array} - async tooltip content\n         *\n         */\n        this.$emit('tooltip-clicked', this.tooltipAsync);\n      }\n    },\n    closeTooltip() {\n      if (!this.showTooltip) {\n        return;\n      }\n      this.showTooltip = false;\n    },\n    scrollResize() {\n      // check if there is a timeout already set and clear it if yes\n      if (this.scrollResizeTimeout) {\n        clearTimeout(this.scrollResizeTimeout);\n        this.scrollResizeTimeout = null;\n      }\n      this.scrollResizeTimeout = setTimeout(() => {\n        if (this.showTooltip) {\n          this.closeTooltip();\n        }\n      }, 100);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  @import \"../../styles/variables\";\n\n  .base-link {\n    display: inline-block;\n    transition-property: color, text-decoration-color, background-color;\n    transition-duration: 150ms;\n    transition-timing-function: ease-in-out;\n\n    &__label {\n      display: flex;\n      align-items: center;\n    }\n\n    &__icon {\n      position: relative;\n      display: inline-block;\n      height: $icon-small;\n      width: $icon-small;\n      margin-left: $spacing-small-half;\n\n      &::v-deep svg {\n        vertical-align: top;\n        height: 100%;\n        width: 100%;\n      }\n\n      @media screen and (min-width: $mobile-min-width) {\n        height: $icon-medium;\n        width: $icon-medium;\n      }\n    }\n\n    &__loader {\n      position: relative;\n      right: $spacing-small;\n      display: inline-block;\n      transform: scale(0.35);\n    }\n\n    &--external {\n      position: relative;\n      text-decoration: underline;\n      text-decoration-color: $app-color;\n\n      &:focus,\n      &:hover {\n        color: $app-color-secondary;\n        text-decoration-color: $app-color-secondary;\n      }\n    }\n\n    &--internal {\n      color: $app-color;\n      cursor: pointer;\n\n      &:focus,\n      &:hover {\n        color: $app-color-secondary;\n      }\n    }\n\n    &--chip {\n      padding: 0 $spacing-small;\n      margin-right: $spacing-small;\n      background-color: $background-color;\n\n      &:focus,\n      &:hover {\n        color: white;\n        background-color: $app-color-secondary;\n        cursor: pointer;\n      }\n    }\n\n    &--tooltip {\n      position: relative;\n\n      svg {\n        display: inline-block;\n        transition: fill 150ms ease-in;\n      }\n\n      &:focus,\n      &:hover {\n        cursor: pointer;\n\n        svg {\n          fill: $app-color-secondary\n        }\n      }\n    }\n\n    &--active {\n      svg {\n        fill: $app-color-secondary\n      }\n    }\n\n    &--space-after {\n      .base-link__label {\n        &:after {\n          content: \" \";\n          white-space: pre;\n        }\n      }\n    }\n  }\n</style>\n"],"names":["_sfc_main","m","ClickOutside","val","tag"],"mappings":"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"}