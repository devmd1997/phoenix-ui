{"version":3,"file":"BaseHlsVideo.cjs.js","sources":["../../../src/components/BaseHlsVideo/BaseHlsVideo.vue"],"sourcesContent":["<template>\n  <div\n    class=\"base-media-video\">\n    <button\n      v-if=\"playButton\"\n      ref=\"playButton\"\n      :title=\"`${getI18nTerm(buttonTitle)} Video`\"\n      class=\"base-media-video__control\"\n      @keydown.enter.space=\"play\"\n      @click=\"play\">\n      <base-icon\n        name=\"play\"\n        class=\"base-media-video__icon\" />\n    </button>\n\n    <!-- tabindex is needed for swiper to handle focus after using tab key -->\n    <video\n      ref=\"videoPlayer\"\n      :style=\"displaySize\"\n      :poster=\"mediaPosterUrl\"\n      :tabindex=\"playButton ? '-1' : '0'\"\n      class=\"base-media-video__video\">\n      Your browser does not support the video tag.\n    </video>\n  </div>\n</template>\n\n<script>\n// eslint-disable-next-line import/extensions\nimport Hls from 'hls.js/dist/hls.light.js';\nimport BaseIcon from '@/components/BaseIcon/BaseIcon';\nimport i18n from '../../mixins/i18n';\n\nexport default {\n  name: 'BaseHlsVideo',\n  components: {\n    BaseIcon,\n  },\n  mixins: [\n    i18n,\n  ],\n  props: {\n    /**\n     * url of the medium to be displayed\n     */\n    mediaUrl: {\n      type: String,\n      default: '',\n    },\n    /**\n     * url of image for poster property in html5 video tag\n     */\n    mediaPosterUrl: {\n      type: String,\n      default: '',\n    },\n    /**\n     * set height and with from outside\n     */\n    displaySize: {\n      type: Object,\n      default: () => ({ height: '720px', width: '1280px' }),\n    },\n    /**\n     * start video on load\n     */\n    autoplay: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * define play button text\n     * could be string or path to i18n json as well\n     */\n    buttonTitle: {\n      type: String,\n      default: 'Play',\n    },\n    /**\n     * define startLevel (size) of hls-video\n     */\n    hlsStartLevel: {\n      type: Number,\n      default: undefined,\n    },\n  },\n  data() {\n    return {\n      hsl: () => {},\n      video: null,\n      playButton: true,\n    };\n  },\n  mounted() {\n    this.video = this.$refs.videoPlayer;\n\n    if (this.autoplay) {\n      this.play();\n    }\n  },\n  destroyed() {\n    // destroy hls object to stop buffering and save bandwidth\n    if (this.hls) {\n      this.hls.destroy();\n    }\n  },\n  methods: {\n    /**\n     * init video\n     */\n    init() {\n      if (this.video) {\n        if (Hls.isSupported()) {\n          if (!this.hls) {\n            this.hls = new Hls({\n              startLevel: this.hlsStartLevel,\n            });\n            this.hls.loadSource(this.mediaUrl);\n            this.hls.attachMedia(this.video);\n            this.hls.on(Hls.Events.MANIFEST_PARSED, () => {\n              this.play();\n              this.playButton = false;\n              this.video.controls = true;\n              this.video.focus();\n            });\n          }\n        } else if (this.video.canPlayType('application/vnd.apple.mpegurl')\n            || this.video.canPlayType('application/vnd.apple.mpegurl') === 'maybe') {\n          this.hls = false;\n          this.video.src = this.mediaUrl;\n          this.video.addEventListener('loadedmetadata', () => {\n            this.video.play();\n            this.video.focus();\n          });\n        }\n\n        this.video.addEventListener('pause', () => {\n          this.playButton = true;\n        });\n\n        this.video.addEventListener('play', () => {\n          this.playButton = false;\n        });\n      }\n    },\n    /**\n     * play video\n     */\n    play() {\n      if (this.video) {\n        if (this.hls || this.video.src) {\n          this.video.play();\n          return;\n        }\n\n        this.init();\n      }\n    },\n    /**\n     * pause video\n     */\n    pause() {\n      if (this.video) {\n        this.video.pause();\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  @import \"../../styles/variables\";\n\n  .base-media-video {\n    position: relative;\n\n    &__control {\n      position: absolute;\n      z-index: 1;\n      top: 50%;\n      left: 50%;\n      width: 50px;\n      height: 50px;\n      border-radius: 50%;\n      transform: translate(-50%, -50%);\n      cursor: pointer;\n      color: $app-color;\n      background-color: white;\n      box-shadow: 0 0 5px 5px rgba(0, 0, 0, 0.15);\n      opacity: 0.5;\n      transition: opacity 250ms ease-in-out;\n\n      &:focus,\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    &__video {\n      max-height: 100%;\n      max-width: 100%;\n    }\n\n    &__icon {\n      height: 100%;\n      width: 100%;\n    }\n  }\n</style>\n"],"names":["_sfc_main","BaseIcon","i18n","Hls"],"mappings":"wbAiCAA,EAAA,CACA,KAAA,eACA,WAAA,CACA,SAAAC,EAAA,OACA,EACA,OAAA,CACAC,EAAA,OACA,EACA,MAAA,CAIA,SAAA,CACA,KAAA,OACA,QAAA,EACA,EAIA,eAAA,CACA,KAAA,OACA,QAAA,EACA,EAIA,YAAA,CACA,KAAA,OACA,QAAA,KAAA,CAAA,OAAA,QAAA,MAAA,QAAA,EACA,EAIA,SAAA,CACA,KAAA,QACA,QAAA,EACA,EAKA,YAAA,CACA,KAAA,OACA,QAAA,MACA,EAIA,cAAA,CACA,KAAA,OACA,QAAA,MACA,CACA,EACA,MAAA,CACA,MAAA,CACA,IAAA,IAAA,CAAA,EACA,MAAA,KACA,WAAA,EACA,CACA,EACA,SAAA,CACA,KAAA,MAAA,KAAA,MAAA,YAEA,KAAA,UACA,KAAA,KAAA,CAEA,EACA,WAAA,CAEA,KAAA,KACA,KAAA,IAAA,SAEA,EACA,QAAA,CAIA,MAAA,CACA,KAAA,QACAC,EAAAA,QAAA,cACA,KAAA,MACA,KAAA,IAAA,IAAAA,UAAA,CACA,WAAA,KAAA,aACA,CAAA,EACA,KAAA,IAAA,WAAA,KAAA,QAAA,EACA,KAAA,IAAA,YAAA,KAAA,KAAA,EACA,KAAA,IAAA,GAAAA,EAAA,QAAA,OAAA,gBAAA,IAAA,CACA,KAAA,KAAA,EACA,KAAA,WAAA,GACA,KAAA,MAAA,SAAA,GACA,KAAA,MAAA,OACA,CAAA,IAEA,KAAA,MAAA,YAAA,+BAAA,GACA,KAAA,MAAA,YAAA,+BAAA,IAAA,WACA,KAAA,IAAA,GACA,KAAA,MAAA,IAAA,KAAA,SACA,KAAA,MAAA,iBAAA,iBAAA,IAAA,CACA,KAAA,MAAA,OACA,KAAA,MAAA,OACA,CAAA,GAGA,KAAA,MAAA,iBAAA,QAAA,IAAA,CACA,KAAA,WAAA,EACA,CAAA,EAEA,KAAA,MAAA,iBAAA,OAAA,IAAA,CACA,KAAA,WAAA,EACA,CAAA,EAEA,EAIA,MAAA,CACA,GAAA,KAAA,MAAA,CACA,GAAA,KAAA,KAAA,KAAA,MAAA,IAAA,CACA,KAAA,MAAA,OACA,MACA,CAEA,KAAA,KAAA,CACA,CACA,EAIA,OAAA,CACA,KAAA,OACA,KAAA,MAAA,OAEA,CACA,CACA"}