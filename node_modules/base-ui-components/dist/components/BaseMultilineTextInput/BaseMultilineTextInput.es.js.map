{"version":3,"file":"BaseMultilineTextInput.es.js","sources":["../../../src/components/BaseMultilineTextInput/BaseMultilineTextInput.vue"],"sourcesContent":["<template>\n  <BaseInput\n    :id=\"idInt\"\n    v-model=\"fieldContent[activeTabInt]\"\n    :is-active.sync=\"isActive\"\n    :label=\"label\"\n    :show-label=\"showLabel\"\n    :placeholder=\"placeholder\"\n    :required=\"required\"\n    :invalid=\"invalid\"\n    :disabled=\"disabled\"\n    :show-error-icon=\"showErrorIcon\"\n    :error-message=\"errorMessage\"\n    :clearable=\"clearable\"\n    :use-fade-out=\"false\"\n    class=\"base-multiline-text-input\"\n    v-on=\"$listeners\">\n    <template #label-addition>\n      <div class=\"base-multiline-text-input__additions\">\n        <!-- @slot to add drop down needed for text input field (base specific) or any other element deemed necessary -->\n        <slot name=\"label-addition\" />\n        <BaseSwitchButton\n          v-if=\"tabs && tabs[0] !== 'default'\"\n          v-model=\"activeTabInt\"\n          :options=\"switchTabs\"\n          :label=\"tabsLegend\"\n          :active-tab=\"activeTab\"\n          class=\"base-multiline-text-input__tabs\">\n          <template\n            #right-of-text=\"tab\">\n            <BaseIcon\n              v-if=\"hasText(tab.value)\"\n              class=\"base-multiline-text-input__text-icon\"\n              name=\"text\" />\n          </template>\n        </BaseSwitchButton>\n      </div>\n    </template>\n    <template #input>\n      <div\n        ref=\"textareaWrapper\"\n        :class=\"['base-multiline-text-input__textarea-wrapper',\n                 { 'base-multiline-text-input__textarea-wrapper__fade-out': showFadeOut }]\">\n        <!-- need to disable because label is there - it is just in BaseInput component -->\n        <!-- eslint-disable-next-line  vuejs-accessibility/form-control-has-label -->\n        <textarea\n          :id=\"idInt\"\n          ref=\"textarea\"\n          v-model=\"fieldContent[activeTabInt]\"\n          :required=\"required\"\n          :aria-required=\"required.toString()\"\n          :aria-describedby=\"idInt\"\n          :aria-invalid=\"invalid.toString()\"\n          :disabled=\"disabled\"\n          :aria-disabled=\"disabled.toString()\"\n          :placeholder=\"placeholder\"\n          class=\"base-multiline-text-input__textarea\"\n          v-on=\"inputListeners\"\n          @keydown.tab=\"isActive = false\" />\n      </div>\n    </template>\n    <template\n      #input-field-addition-before>\n      <!-- @slot Slot to allow for additional elements in the input field <div> (before <input>) -->\n      <slot name=\"input-field-addition-before\" />\n    </template>\n    <template #input-field-addition-after>\n      <!-- @slot for adding elements after input -->\n      <slot name=\"input-field-addition-after\" />\n    </template>\n    <template #post-input-field>\n      <!-- @slot elements after the actual input element but within the input field container. for an example see [BaseChipsInputField](BaseChipsInputField)-->\n      <slot name=\"post-input-field\" />\n    </template>\n    <template #error-icon>\n      <!-- @slot use a custom icon instead of standard error/warning icon. for an example see [BaseChipsInputField](BaseChipsInputField)-->\n      <slot name=\"error-icon\" />\n    </template>\n    <template #remove-icon>\n      <!-- @slot use a custom icon instead of standard remove icon. for an example see [BaseChipsInputField](BaseChipsInputField)-->\n      <slot name=\"remove-icon\" />\n    </template>\n  </BaseInput>\n</template>\n\n<script>\nimport BaseInput from '@/components/BaseInput/BaseInput';\nimport BaseIcon from '@/components/BaseIcon/BaseIcon';\nimport { createId } from '@/utils/utils';\n\n/**\n * A multiline textfield base component\n */\n\nexport default {\n  name: 'BaseMultilineTextInput',\n  components: {\n    BaseInput,\n    BaseIcon,\n    BaseSwitchButton: () => import('@/components/BaseSwitchButton/BaseSwitchButton').then(m => m.default || m),\n  },\n  model: {\n    prop: 'input',\n    event: 'input',\n  },\n  props: {\n    /**\n     * input displayed in the textarea.\n     *   if `tabs` prop is set, this needs to be an object with properties corresponding to\n     *   tab names.\n     */\n    input: {\n      type: [Object, String],\n      default: '',\n    },\n    /**\n     * set the label for the input component\n     */\n    label: {\n      type: String,\n      default: '',\n    },\n    /**\n     * set `true` if label should be visible\n     */\n    showLabel: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * set input field placeholder\n     */\n    placeholder: {\n      type: String,\n      default: '',\n    },\n    /**\n     * set tabs for the input field\n     */\n    tabs: {\n      type: Array,\n      default: () => ['default'],\n    },\n    /**\n     * give the possibility to specify what should be displayed in the tabs\n     */\n    tabLabels: {\n      type: Array,\n      default: () => [],\n    },\n    /**\n     * set the currently active tab (specify the property of the object not the label)\n     */\n    activeTab: {\n      type: String,\n      default() {\n        return this.tabs[0] || 'default';\n      },\n    },\n    /**\n     * set a legend for the tabs to be read (for accessibility only, hidden)\n     */\n    tabsLegend: {\n      type: String,\n      default: 'Radiogroup',\n    },\n    /**\n     * set id which is used for label + id\n     */\n    id: {\n      type: [String, Number],\n      default: '',\n    },\n    /**\n     * set a language (ISO 639-1)\n     */\n    language: {\n      type: String,\n      default: '',\n    },\n    /**\n     * mark as required field (currently only used for `aria-required`)\n     */\n    required: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * mark the form field as invalid and ideally also provide an error message\n     * to display below the form field.\n     * for an example see [BaseInput](BaseInput)\n     */\n    invalid: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * set true if input field should be disabled.\n     * for an example see [BaseInput](BaseInput)\n     */\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * add an error message to be displayed below form field if field is invalid.\n     * for an example see [BaseInput](BaseInput)\n     */\n    errorMessage: {\n      type: String,\n      default: '',\n    },\n    /**\n     * define if error icon should be shown.\n     * for an example see [BaseInput](BaseInput)\n     */\n    showErrorIcon: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * if true a remove icon will be shown allowing to remove\n     * all input at once.\n     * for an example see [BaseInput](BaseInput)\n     */\n    clearable: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      activeTabInt: this.activeTab || 'default',\n      fieldContent: {},\n      isActive: false,\n    };\n  },\n  computed: {\n    /**\n     * check if an id was provided (to handle label input connection), if not create one\n     * @returns {String|string}\n     */\n    idInt() {\n      return this.id || createId();\n    },\n    // TODO: refactor component props to already match object necessary for switch component\n    switchTabs() {\n      return this.tabs.map((tab, index) => ({ value: tab, label: this.tabLabels[index] || tab }));\n    },\n    inputListeners() {\n      return {\n        // add all the listeners from the parent\n        ...this.$listeners,\n        // and add custom listeners\n        ...{\n          input: () => {\n            /**\n             * Event emitted on input, passing input string or input object\n             *\n             * @event input\n             * @param {string, Object} - the altered field input\n             */\n            this.$emit('input', this.emitFieldContent());\n          },\n        },\n      };\n    },\n    showFadeOut() {\n      if (this.$refs && this.$refs.textarea) {\n        return !this.isActive\n          && this.$refs.textarea.scrollHeight > this.$refs.textareaWrapper.clientHeight;\n      }\n      return !this.isActive;\n    },\n  },\n  watch: {\n    // watch for input changes from outside\n    input: {\n      handler(val) {\n        if ((typeof val === 'object' && JSON.stringify(val) !== JSON.stringify(this.fieldContent))\n          || (typeof val === 'string' && val !== this.fieldContent[this.activeTabInt])) {\n          // if input changes set internal fieldContent variable\n          this.setFieldContent(val);\n        }\n      },\n      immediate: true,\n      deep: true,\n    },\n    // get updates for active tab from outside\n    activeTab(val) {\n      this.activeTabInt = val;\n    },\n  },\n  methods: {\n    setFieldContent(val) {\n      if (this.tabs.length < 2) {\n        const propName = this.activeTabInt || 'default';\n        this.$set(this.fieldContent, propName, typeof val === 'string' ? val : val[propName]);\n      } else {\n        this.tabs.forEach(tab => this.$set(\n          this.fieldContent,\n          tab,\n          val[tab],\n        ));\n      }\n    },\n    emitFieldContent() {\n      if (typeof this.input === 'object') {\n        return this.fieldContent;\n      }\n      return this.fieldContent[this.activeTabInt];\n    },\n    hasText(val) {\n      return !!this.fieldContent[val];\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../styles/variables.scss';\n\n.base-multiline-text-input {\n  font-family: inherit;\n  font-size: inherit;\n\n  .base-multiline-text-input__additions {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    justify-content: flex-end;\n    margin-bottom: -$spacing-small-half;\n\n    .base-multiline-text-input__tabs {\n      align-self: center;\n      flex-shrink: 0;\n\n      .base-multiline-text-input__text-icon {\n        margin-left: $spacing-small;\n        height: 10px;\n        width: 10px;\n        vertical-align: middle;\n        margin-bottom: $spacing-small-half;\n        color: $font-color-second;\n        fill: $font-color-second;\n      }\n    }\n  }\n\n  .base-multiline-text-input__textarea-wrapper {\n    width: 100%;\n\n    &.base-multiline-text-input__textarea-wrapper__fade-out::after {\n      content: '';\n      width: 100%;\n      height: $fade-out-width;\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      background: linear-gradient(to bottom, rgba(255, 255, 255, 0) , white);\n      pointer-events: none;\n    }\n\n    .base-multiline-text-input__textarea {\n      width: 100%;\n      line-height: $line-height;\n      padding: $spacing-small-half 0;\n      margin: 0;\n      height: 240px;\n      appearance: none;\n      resize: none;\n      -ms-overflow-style: none;  /* Internet Explorer 10+ */\n      scrollbar-width: none;  /* Firefox */\n\n      &::-webkit-scrollbar {\n        display: none;  /* Safari and Chrome */\n      }\n    }\n  }\n}\n\n@media screen and (max-width: $tablet) {\n  .base-multiline-text-input {\n    .base-multiline-text-input__additions {\n      justify-content: flex-end;\n    }\n  }\n}\n\n@media screen and (max-width: $mobile) {\n  .base-multiline-text-input\n  .base-multiline-text-input__additions {\n    margin-bottom: -$spacing-small;\n  }\n}\n\n</style>\n"],"names":["_sfc_main","BaseInput","BaseIcon","m","createId","tab","index","val","propName"],"mappings":"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"}