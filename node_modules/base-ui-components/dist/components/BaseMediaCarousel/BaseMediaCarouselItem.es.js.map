{"version":3,"file":"BaseMediaCarouselItem.es.js","sources":["../../../src/components/BaseMediaCarousel/BaseMediaCarouselItem.vue"],"sourcesContent":["<template>\n  <div\n    :style=\"{ '--footer-height': footerHeight + 'px' }\"\n    class=\"base-media-preview-image-stage\">\n    <!-- container 'base-media-preview-preloader' is removed by swiper after image is loaded -->\n    <!-- class is also defined in swiper setup -->\n    <div\n      v-if=\"displayImage && fileType === 'image'\"\n      class=\"base-media-preview-preloader\">\n      <base-loader\n        class=\"base-media-preview-preloader-loader\" />\n    </div>\n    <img\n      v-if=\"displayImage && fileType === 'image'\"\n      :src=\"sourceUrl\"\n      :srcset=\"imageSourceSet\"\n      :style=\"displaySize\"\n      :alt=\"fileName\"\n      :class=\"[\n        'base-media-preview-image',\n        'base-media-preview-rotation-' + orientation.toString(),\n      ]\"\n      loading=\"lazy\"\n      @error=\"displayImage = false\">\n    <div\n      v-else-if=\"fileType === 'image' && !displayImage\"\n      class=\"base-media-preview-not-supported base-media-preview-error\">\n      <p class=\"base-media-preview-not-supported-file-name\">\n        An error occurred displaying this image.\n      </p>\n    </div>\n    <base-hls-video\n      v-else-if=\"fileType === 'video'\"\n      ref=\"baseMediaVideo\"\n      :display-size=\"displaySize\"\n      :media-url=\"mediaUrl\"\n      :media-poster-url=\"mediaPosterUrl\"\n      :autoplay=\"autoplay\"\n      :hls-start-level=\"hlsStartLevel\"\n      class=\"base-media-preview-image base-media-preview-video\" />\n    <audio\n      v-else-if=\"fileType === 'audio'\"\n      ref=\"baseMediaAudio\"\n      controls\n      class=\"base-media-preview__audio\">\n      Your browser does not support the audio tag.\n      <source\n        :src=\"mediaUrl\"\n        type=\"audio/mpeg\">\n    </audio>\n    <div\n      v-else\n      class=\"base-media-preview-not-supported base-media-preview-error\">\n      <p class=\"base-media-preview-not-supported-file-name\">\n        {{ fileName }}\n      </p>\n      <div class=\"base-media-preview-not-supported-buttons\">\n        <BaseButton\n          v-if=\"allowDownload || (!allowDownload && fileType === '')\"\n          :text=\"getI18nTerm(infoTexts.download)\"\n          icon=\"download\"\n          icon-position=\"right\"\n          icon-size=\"large\"\n          class=\"base-media-preview__button base-media-preview-not-supported-button\"\n          @clicked=\"download\" />\n        <BaseButton\n          v-if=\"(!isMobile && fileEnding === 'pdf')\n            || (!allowDownload && fileEnding === 'pdf')\"\n          :text=\"getI18nTerm(infoTexts.view)\"\n          icon=\"eye\"\n          icon-position=\"right\"\n          icon-size=\"large\"\n          class=\"base-media-preview__button base-media-preview-not-supported-button\"\n          @clicked=\"openPdf()\" />\n      </div>\n      <p\n        v-for=\"textline in additionalInfo\"\n        :key=\"textline\"\n        class=\"base-media-preview__not-supported-additional\">\n        {{ textline }}\n      </p>\n    </div>\n    <div\n      ref=\"footer\"\n      class=\"base-media-preview-info\">\n      <div\n        class=\"base-media-preview__info__col\n               base-media-preview__info__col1\n               base-media-preview__info-text-wrapper\">\n        <p class=\"base-media-preview-info-text\">\n          {{ displayName }}\n        </p>\n        <template v-if=\"additionalInfo.length\">\n          <p\n            v-for=\"textline in additionalInfo\"\n            :key=\"textline\"\n            class=\"base-media-preview__info-text-additional\">\n            {{ textline }}\n          </p>\n        </template>\n      </div>\n      <div\n        v-if=\"currentSlideInfo\"\n        aria-hidden=\"true\"\n        class=\"base-media-preview__info__col base-media-preview__info__col2\">\n        <p>\n          {{ currentSlideInfo }}\n        </p>\n      </div>\n      <div\n        v-if=\"allowDownload\"\n        class=\"base-media-preview__info__col base-media-preview__info__col3\">\n        <BaseButton\n          :text=\"infoTexts.download\"\n          icon=\"download\"\n          icon-position=\"right\"\n          icon-size=\"large\"\n          class=\"base-media-preview__button\"\n          @clicked=\"download\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport BaseLoader from '@/components/BaseLoader/BaseLoader';\nimport { debounce } from '@/utils/utils';\nimport i18n from '../../mixins/i18n';\n\n/**\n * Component allowing for the display of images or streaming of\n * audio and video (currently only hls format) and by using browser pdf viewer also pdfs\n */\n\nexport default {\n  name: 'BaseMedia',\n  components: {\n    BaseLoader,\n    BaseButton: () => import('../BaseButton/BaseButton').then(m => m.default || m),\n    BaseHlsVideo: () => import('../BaseHlsVideo/BaseHlsVideo').then(m => m.default || m),\n  },\n  mixins: [i18n],\n  props: {\n    /**\n     * url of the medium to be displayed\n     */\n    mediaUrl: {\n      type: String,\n      default: '',\n    },\n    /**\n     * url of image for poster property in html5 video tag\n     */\n    mediaPosterUrl: {\n      type: String,\n      default: '',\n    },\n    /**\n     * filename that will be displayed for the medium\n     */\n    displayName: {\n      type: String,\n      default: '',\n    },\n    /**\n     * url for downloading the file\n     */\n    downloadUrl: {\n      type: String,\n      default: '',\n    },\n    /**\n     * define the media type\n     *     options: 'image'|'video'|'audio'|'pdf'\n     */\n    mediaType: {\n      type: String,\n      default: '',\n      validator(val) {\n        return ['image', 'video', 'audio', 'pdf', ''].includes(val);\n      },\n    },\n    /**\n     * set height and with from outside\n     * e.g. { width: 1280px, height: 720px }\n     */\n    displaySize: {\n      type: Object,\n      default: () => ({}),\n    },\n    /**\n     * define if download button should be shown and download be enabled\n     */\n    allowDownload: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * define information texts for download and view (for pdfs) buttons in an\n     * object with the respective properties\n     *   could be strings or path to i18n json as well\n     */\n    infoTexts: {\n      type: Object,\n      default: () => ({\n        download: 'Download',\n        view: 'View',\n      }),\n    },\n    /**\n     * define how the image should be rotated (EXIF orientation values)\n     */\n    orientation: {\n      type: Number,\n      default: 0,\n    },\n    /**\n     * specify an image srcset as an array of objects in the form\n     *     `{ [mediawidth]: 'url' }`\n     */\n    previews: {\n      type: Array,\n      default: () => [],\n    },\n    /**\n     * additional info text below file name\n     */\n    additionalInfo: {\n      type: Array,\n      default: () => [],\n    },\n    /**\n     * set autoplay for video\n     */\n    autoplay: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * info text to display current slide e.g. '1 / 6'\n     */\n    currentSlideInfo: {\n      type: String,\n      default: '',\n    },\n    /**\n     * define startLevel (size) of hls-video\n     */\n    hlsStartLevel: {\n      type: Number,\n      default: undefined,\n    },\n  },\n  data() {\n    return {\n      // variable for display image error handling\n      displayImage: true,\n      isMobile: false,\n      // variable to store calculated footer height\n      footerHeight: null,\n    };\n  },\n  computed: {\n    fileType() {\n      if (this.mediaType) return this.mediaType;\n      const docType = this.fileEnding;\n      // check if image\n      if (['png', 'gif', 'jpeg', 'jpg'].includes(docType.toLowerCase())) {\n        return 'image';\n      }\n      // check if video\n      if (['mp4', 'm3u8', 'ogg'].includes(docType.toLowerCase())) {\n        return 'video';\n      }\n      // check if audio\n      if (['mp3', 'wav', 'mpeg'].includes(docType.toLowerCase())) {\n        return 'audio';\n      }\n      // check if pdf\n      if (['pdf'].includes(docType.toLowerCase())) {\n        return 'document';\n      }\n      return '';\n    },\n    fileName() {\n      const match = this.sourceUrl.match(/([^/]+)$/);\n      return match ? decodeURI(match[1]) : '';\n    },\n    fileEnding() {\n      const match = this.sourceUrl.match(/\\w+\\.(\\w{2,4})$/);\n      return match ? match[1] : '';\n    },\n    formatNotSupported() {\n      return !this.fileType;\n    },\n    imageSourceSet() {\n      return this.previews.length ? this.previews.map(size => Object.keys(size)\n        .map(width => `${size[width]} ${width}`)).join(', ') : '';\n    },\n    sourceUrl() {\n      const last = this.previews.length - 1;\n      return this.previews && this.previews[last]\n        ? Object.values(this.previews[last])[0] : this.mediaUrl;\n    },\n  },\n  mounted() {\n    this.isMobile = window.innerWidth <= 640;\n    this.setFooterHeight();\n    this.resizeObserver().observe(document.body);\n  },\n  beforeDestroy() {\n    this.resizeObserver().unobserve(document.body);\n  },\n  methods: {\n    /**\n     * function to trigger download action\n     */\n    download() {\n      // check again if user is allowed to download\n      if (this.allowDownload || (!this.allowDownload && this.fileType === '')) {\n        /**\n         * download button clicked\n         *\n         * @event download\n         * @property {string} url - the download url\n         * @property {string} name - the file name\n         *\n         */\n        this.$emit('download', { url: this.downloadUrl || this.mediaUrl, name: this.fileName });\n      }\n    },\n    /**\n     * function to open pdf\n     */\n    openPdf() {\n      window.open(this.mediaUrl);\n    },\n    /**\n     * set footer height\n     */\n    setFooterHeight() {\n      if (!this.$refs.footer) {\n        return;\n      }\n      this.footerHeight = this.$refs.footer.offsetHeight;\n    },\n    /**\n     * check if document width changes and calc/set footer height\n     */\n    resizeObserver() {\n      return new ResizeObserver(debounce(500, () => this.setFooterHeight()));\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  @import '../../styles/variables';\n\n  .base-media-preview-image-stage {\n    margin: auto;\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    outline: none;\n    padding: 0 $spacing-small;\n\n    .base-media-preview-image {\n      width: 100%;\n      max-height: calc(100vh - var(--footer-height) - #{$spacing});\n      max-width: 100%;\n      margin-top: auto;\n      object-fit: scale-down;\n\n      &.base-media-preview-rotation-2 {\n        transform: scaleX(-1);\n      }\n\n      &.base-media-preview-rotation-3 {\n        transform: scale(-1);\n      }\n\n      &.base-media-preview-rotation-4 {\n        transform: scaleY(-1);\n      }\n\n      &.base-media-preview-rotation-5 {\n        transform: scaleX(-1) rotate(90deg);\n      }\n\n      &.base-media-preview-rotation-6 {\n        transform: scale(-1) rotate(-90deg);\n      }\n\n      &.base-media-preview-rotation-7 {\n        transform: scaleY(-1) rotate(90deg);\n      }\n\n      &.base-media-preview-rotation-8 {\n        transform: scale(-1) rotate(90deg);\n      }\n    }\n\n    .base-media-preview-error {\n      color: whitesmoke;\n    }\n\n    .base-media-preview__audio {\n      margin-top: auto;\n    }\n\n    .base-media-preview-not-supported {\n      text-align: center;\n      background-color: rgba(0, 0, 0, 0.3);\n      height: 20%;\n      min-height: 200px;\n      min-width: 200px;\n      width: 50%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      color: whitesmoke;\n      margin-top: auto;\n      padding: $spacing;\n\n      @media screen and (max-width: $mobile) {\n        width: 75%;\n      }\n\n      .base-media-preview-not-supported-file-name {\n        margin-bottom: $spacing;\n        padding: 0 $spacing;\n        font-weight: 600;\n        word-break: break-all;\n      }\n\n      .base-media-preview-not-supported-buttons {\n        display: flex;\n        justify-content: center;\n\n        .base-media-preview-not-supported-button {\n          margin: 0 $spacing-small $spacing;\n          min-width: 150px;\n        }\n      }\n\n      .base-media-preview__not-supported-additional {\n        font-size: $font-size-small;\n        word-break: break-all;\n      }\n    }\n\n    .base-media-preview-video {\n      width: auto;\n      max-height: calc(100vh - var(--footer-height) - #{$spacing});\n      max-width: 100%;\n      margin-top: auto;\n    }\n\n    .base-media-preview-document-wrapper {\n      height: 90%;\n      width: 90%;\n\n      .base-media-preview-document {\n        height: 100%;\n        width: 100%;\n      }\n    }\n\n    .base-media-preview-info {\n      width: calc(100% + #{$spacing});\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      background-color: rgba(0, 0, 0, 0.3);\n      color: whitesmoke;\n      padding: $spacing-small;\n      margin-top: auto;\n      margin-left: -$spacing-small;\n      margin-right: -$spacing-small;\n\n      .base-media-preview__info__col1,\n      .base-media-preview__info__col3 {\n        flex: 1;\n      }\n\n      .base-media-preview__info__col1 {\n        word-break: break-word;\n      }\n\n      .base-media-preview__info__col2 {\n        text-align: center;\n        font-size: $font-size-small;\n        align-self: flex-end;\n      }\n\n      .base-media-preview__info__col3 {\n        display: flex;\n        justify-content: flex-end;\n      }\n\n      .base-media-preview__info-text-wrapper {\n        margin-right: $spacing;\n\n        .base-media-preview-info-text {\n          padding-bottom: $spacing-small-half;\n          margin-bottom: 0;\n        }\n\n        .base-media-preview__info-text-additional {\n          font-size: $font-size-small;\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .base-media-preview__button {\n      color: $font-color;\n\n      &:hover {\n        color: $app-color;\n      }\n\n      &:active, &:focus {\n        fill: $app-color;\n      }\n    }\n  }\n\n  @media screen and (max-width: $mobile) {\n    .base-media-preview-not-supported,\n    .base-media-preview-not-supported-buttons {\n      flex-wrap: wrap;\n    }\n\n    .base-media-preview-image-stage,\n    .base-media-preview-not-supported,\n    .base-media-preview-not-supported-buttons {\n      .base-media-preview-not-supported-button {\n        margin: $spacing-small;\n        min-width: 125px;\n      }\n    }\n  }\n\n  .base-media-preview-preloader {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    .base-media-preview-preloader-loader {\n      top: 50%;\n      transform: translate(-50%, -75%);\n    }\n  }\n</style>\n"],"names":["_sfc_main","BaseLoader","m","i18n","val","docType","match","size","width","last","debounce"],"mappings":"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"}