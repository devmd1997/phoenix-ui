"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const i=require("../../utils/utils.cjs.js"),l=require("vue-click-outside"),a=require("../../mixins/i18n.cjs.js"),d=require("../BaseIcon/BaseIcon.cjs.js");require("./BaseDropDown.vue_vue_type_style_index_0_scoped_12d55f80_lang.cjs.js");const p=require("../../_virtual/_plugin-vue2_normalizer.cjs.js"),u=t=>t&&typeof t=="object"&&"default"in t?t:{default:t},c=u(l),h={name:"BaseDropDown",components:{BaseIcon:d.default},directives:{ClickOutside:c.default},mixins:[a.default],model:{prop:"selectedOption",event:"value-selected"},props:{options:{type:Array,default:()=>[]},label:{type:String,default:"Drop Down"},placeholder:{type:String,default:"Select"},selectedOption:{type:Object,default:()=>({value:"",label:""})},showLabel:{type:Boolean,default:!1},headerBackgroundColor:{type:String,default:"inherit"},language:{type:String,default:"",validator:t=>!t||t.length===2},valueProp:{type:String,default:"value"},isDisabled:{type:Boolean,default:!1},withSpacing:{type:Boolean,default:!0},alignDropDown:{type:String,default:"left",validator(t){return["left","right"].includes(t)}},id:{type:[String,Number],default:""}},data(){return{showDropDown:!1,keySelectedIndex:-1,showFadeOut:!1,maxDropDownHeight:"0",resizeObserver:null}},computed:{selectedOptionInt(){return this.getLangLabel(this.selectedOption.label,!0)||this.placeholder||""}},watch:{showDropDown(t){if(t){const e=window.innerHeight-this.$el.offsetTop-120;this.maxDropDownHeight=`${e<300?e:300}px`}t||(this.keySelectedIndex=-1)}},mounted(){this.initObserver()},beforeDestroy(){this.resizeObserver&&this.resizeObserver.unobserve(this.$refs.baseDropdown)},methods:{initObserver(){const t=new ResizeObserver(i.debounce(50,()=>this.setOverflow()));t.observe(this.$refs.baseDropdown),this.resizeObserver=t},selectValue(t){this.showDropDown=!1,this.$emit("value-selected",t)},selectByKey(t){const{key:e}=t;e==="Space"?this.showDropDown=!this.showDropDown:this.showDropDown&&(e==="ArrowUp"||t.shiftKey&&e==="Tab")?this.keySelectedIndex>0&&(this.keySelectedIndex-=1):this.showDropDown&&(e==="ArrowDown"||e==="Tab")?this.keySelectedIndex<this.options.length-1&&(this.keySelectedIndex+=1):e==="Enter"?this.showDropDown&&this.keySelectedIndex>=0?this.selectValue(this.options[this.keySelectedIndex]):this.showDropDown=!this.showDropDown:e==="Escape"&&(this.showDropDown=!1),this.$refs.option&&this.$refs.option[this.keySelectedIndex]&&this.$refs.dropdownContainer.scrollHeight!==this.$refs.dropdownContainer.clientHeight&&this.$refs.option[this.keySelectedIndex].scrollIntoView({block:"nearest",inline:"nearest"})},setOverflow(){const t=this.$refs.dropDownButton?this.$refs.dropDownButton.getBoundingClientRect().width:0,e=this.$refs.headText?this.$refs.headText.getBoundingClientRect().width:0;this.showFadeOut=e>t}}};var w=function(){var e=this,s=e._self._c;return s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:()=>e.showDropDown=!1,expression:"() => showDropDown = false"}],ref:"baseDropdown",staticClass:"base-drop-down"},[s("div",{class:["base-drop-down-label-wrapper",{hide:!e.getLangLabel(e.label,!0)||!e.showLabel}]},[s("label",{staticClass:"base-drop-down-label",attrs:{for:e.getLangLabel(e.label)+"-"+e.id}},[e._v(" "+e._s(e.getLangLabel(e.label,!0))+" ")])]),s("button",{class:["base-drop-down-head",{"base-drop-down-head-spacing":e.withSpacing}],style:{"background-color":e.headerBackgroundColor},attrs:{id:e.getLangLabel(e.label)+"-"+e.id,"aria-expanded":String(e.showDropDown),disabled:e.isDisabled,"aria-haspopup":"listbox",type:"button"},on:{click:function(o){o.preventDefault(),e.showDropDown=!e.showDropDown},keydown:[function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")&&e._k(o.keyCode,"esc",27,o.key,["Esc","Escape"])&&e._k(o.keyCode,"down",40,o.key,["Down","ArrowDown"])&&e._k(o.keyCode,"up",38,o.key,["Up","ArrowUp"])?null:(o.preventDefault(),e.selectByKey.apply(null,arguments))},function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"tab",9,o.key,"Tab")?null:e.selectByKey.apply(null,arguments)}]}},[s("div",{ref:"dropDownButton",class:["base-drop-down-head-text-wrapper",{"base-drop-down-head-text-fade-out":e.showFadeOut}]},[s("span",{ref:"headText",staticClass:"base-drop-down-head-text"},[e._v(" "+e._s(e.selectedOptionInt)+" ")])]),e._t("header-right",function(){return[s("base-icon",{class:["base-drop-down-icon",{"base-drop-down-icon-rotated":e.showDropDown}],attrs:{name:"drop-down"}})]})],2),e.showDropDown?s("div",{ref:"dropdownContainer",staticClass:"base-drop-down-body",style:{[e.alignDropDown]:0,"max-height":e.maxDropDownHeight}},[e._t("default",function(){return[s("ul",{staticClass:"base-drop-down-body-list",attrs:{"aria-labelledby":e.getLangLabel(e.label)+"-"+e.id,role:"listbox"}},e._l(e.options,function(o,r){return s("li",{key:o[e.valueProp],ref:"option",refInFor:!0,class:["base-drop-down-option",{"base-drop-down-option-selected":e.selectedOption&&o[e.valueProp]===e.selectedOption[e.valueProp]},{"base-drop-down-option-key-selected":e.keySelectedIndex===r}],attrs:{role:"option","aria-selected":(e.selectedOption&&o[e.valueProp]===e.selectedOption[e.valueProp]).toString(),tabindex:"0"},on:{keydown:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.selectValue(o)},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"tab",9,n.key,"Tab")?null:e.selectByKey.apply(null,arguments)}],click:function(n){return e.selectValue(o)}}},[e._v(" "+e._s(e.getLangLabel(o.label,!0))+" ")])}),0)]})],2):e._e()])},f=[],b=p.default(h,w,f,!1,null,"12d55f80",null,null);const y=b.exports;exports.default=y;
//# sourceMappingURL=BaseDropDown.cjs.js.map
