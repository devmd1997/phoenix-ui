"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const n=require("../../mixins/i18n.cjs.js");require("./BaseFormFieldCreator.vue_vue_type_style_index_0_scoped_05f05736_lang.cjs.js");const a=require("../../_virtual/_plugin-vue2_normalizer.cjs.js"),o={name:"BaseFormFieldCreator",components:{BaseDropDown:()=>Promise.resolve().then(()=>require("../BaseDropDown/BaseDropDown.cjs.js")).then(t=>t.default||t),BaseDateInput:()=>Promise.resolve().then(()=>require("../BaseDateInput/BaseDateInput.cjs.js")).then(t=>t.default||t),BaseForm:()=>Promise.resolve().then(()=>require("../BaseForm/BaseForm.cjs.js")).then(t=>t.default||t),BaseToggle:()=>Promise.resolve().then(()=>require("../BaseToggle/BaseToggle.cjs.js")).then(t=>t.default||t),BaseLink:()=>Promise.resolve().then(()=>require("../BaseLink/BaseLink.cjs.js")).then(t=>t.default||t)},mixins:[n.default],props:{fieldKey:{type:[Number,String],required:!0},field:{type:Object,required:!0},fieldValue:{type:[Object,String,Array,Date,Number,Boolean],required:!0},fieldProps:{type:Object,default:()=>({})},label:{type:String,default:""},showLabel:{type:Boolean,default:!0},placeholder:{type:[String,Object],default:""},dropDownList:{type:[Array,Object],default:()=>[]},secondaryDropdown:{type:Array,default:()=>[]},hoverBoxData:{type:Object,default:()=>({})},autocompleteLoading:{type:Boolean,default:!1},language:{type:String,default:"en"},availableLocales:{type:Array,default:()=>[]},sortText:{type:String,default:"Sort A - Z"},fieldGroupParams:{type:Object,default:()=>({})},required:{type:Boolean,default:!1},invalid:{type:Boolean,default:!1},errorMessage:{type:String,default:""},validationTexts:{type:Object,default:()=>({text:{min:"Value must be greater than or equal to {value}.",max:"Value must be less than or equal to {value}.",minLength:"Text must be at least {value} character(s) long.",maxLength:"Text cannot be longer than {value} characters."}}),validator:t=>["text"].every(e=>Object.keys(t).includes(e))&&["min","max","minLength","maxLength"].every(e=>Object.keys(t.text).includes(e))},showErrorIcon:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},identifierPropertyName:{type:String,default:"source"},labelPropertyName:{type:String,default:"label"}},data(){return{fieldValueInt:null,textInput:"",fetchingData:!1,activeTab:""}},computed:{fieldElement(){return this.fieldType==="text"||this.fieldType==="integer"||this.fieldType==="float"?()=>Promise.resolve().then(()=>require("../BaseInput/BaseInput.cjs.js")):this.fieldType==="multiline"?()=>Promise.resolve().then(()=>require("../BaseMultilineTextInput/BaseMultilineTextInput.cjs.js")):this.fieldType==="autocomplete"?()=>Promise.resolve().then(()=>require("../BaseAutocompleteInput/BaseAutocompleteInput.cjs.js")):this.fieldType==="chips"?()=>Promise.resolve().then(()=>require("../BaseChipsInput/BaseChipsInput.cjs.js")):this.fieldType==="chips-below"?()=>Promise.resolve().then(()=>require("../BaseChipsBelow/BaseChipsBelow.cjs.js")):null},dateType(){const t=this.field.properties||this.field.items&&this.field.items.properties?Object.keys(this.field.properties||this.field.items.properties):[];return!this.field.properties&&(!this.field.items||!this.field.items.properties)?"single":t.includes("date_to")&&t.includes("time_to")?"daterangetimerange":t.includes("date")&&t.includes("time_to")?"datetimerange":t.includes("time")?"datetime":t.includes("date_to")?"daterange":"single"},groupFormFields(){return this.field.type==="array"?this.field.items.properties:this.field.properties},fieldGroupDropDownLists(){const t=this.field.name,{dropDownLists:e}=this.fieldGroupParams;return e&&e[t]?e[t]:e},formFieldXAttrs(){return this.field["x-attrs"]||{}},textTypeDefault(){return{[this.labelPropertyName]:this.setLangLabels("form.noTextType",this.availableLocales),[this.identifierPropertyName]:""}},textTypeOptions(){return[this.textTypeDefault].concat(this.secondaryDropdown)},isContributorOrEquivalent(){return this.field.name==="contributors"||this.formFieldXAttrs.equivalent==="contributors"},fieldInput(){return this.textInput&&this.textInput.length>2},isChipsSingleSelect(){return this.fieldType&&this.fieldType.includes("chips")&&this.field.type==="object"},labelInt(){return this.label||this.fieldProps.label?this.label||this.fieldProps.label:this.field.title||this.getI18nTerm(`form.${this.field.name}`||this.field.name)},placeholderInt(){return this.placeholder||this.fieldProps.placeholder?this.placeholder||this.fieldProps.placeholder:this.formFieldXAttrs.placeholder||""||`${this.hasI18n?this.getI18nTerm("form.select"):"Select"} ${this.labelInt}`},fieldType(){return this.formFieldXAttrs.field_type||"text"},tabs(){return this.field.items&&this.field.items.properties&&this.field.items.properties.data&&this.field.items.properties.data.items&&this.field.items.properties.data.items.properties&&this.field.items.properties.data.items.properties.language?Object.keys(this.field.items.properties.data.items.properties.language.properties.label.properties).filter(t=>this.availableLocales.includes(t)):[]},isNumberField(){const t=this.field.items?this.field.items.type:this.field.type;return["integer","number"].includes(t)&&["integer","float","text"].includes(this.fieldType)},allowedDecimals(){const t=this.formFieldXAttrs.decimals||this.fieldProps.decimals,e=this.field.type==="array"?this.field.items.type:this.field.type,l=this.field.type==="array"?this.field.items.format:this.field.format;return e==="number"&&["float","double","decimal"].includes(l)&&!(t||t===0)?-1:(e==="number"||this.fieldProps.fieldType==="number")&&["float","double","decimal"].includes(l)&&(t||t===0)?t:e==="integer"||this.fieldProps.fieldType==="number"||t===0?0:null}},watch:{fieldValue:{handler(t){if(JSON.stringify(this.fieldValueInt)!==JSON.stringify(t)){this.setFieldValue(t);const e=this.fieldProps.tabs||this.tabs;e&&e.length&&(this.activeTab=this.setActiveTab())}},immediate:!0},fieldValueInt:{handler(t){t!==void 0&&JSON.stringify(this.fieldValue)!==JSON.stringify(t)&&this.$emit("field-value-changed",t)},deep:!0},dropDownList:{handler(){this.fetchingData=!1},deep:!0}},mounted(){this.setFieldValue(this.fieldValue),this.tabs&&this.tabs.length&&(this.activeTab=this.setActiveTab())},methods:{setFieldValue(t){t&&typeof t=="object"?t.length>=0?this.fieldValueInt=[].concat(JSON.parse(JSON.stringify(t))):this.fieldValueInt={...JSON.parse(JSON.stringify(t))}:this.fieldValueInt=t},setInputValue(t){!t||typeof t=="string"||typeof t=="number"?this.fieldValueInt=t:this.fieldValueInt={...this.fieldValueInt,...JSON.parse(JSON.stringify(t))}},fetchAutocomplete({value:t}){this.fetchingData=!0,this.textInput=t,this.$emit("fetch-autocomplete",{value:t,name:this.field.name,source:this.formFieldXAttrs.source,equivalent:this.formFieldXAttrs.equivalent})},subFormFetchAutocomplete(t){const e=t.parentFields||[];e.unshift(this.field.name),this.$emit("fetch-autocomplete",{...t,parentFields:e})},getLabel(t){return this.getLangLabel(t,this.language,!0)},setActiveTab(){const t=this.availableLocales.filter(e=>!!this.fieldValueInt[e]);return!t.length||this.fieldValueInt[this.language]?this.language:t[0]},setMultilineDropDown(t){this.$set(this.fieldValueInt,"type",t.source?t:null)},onEnter(t){this.fieldType!=="multiline"?t.preventDefault():this.$emit("keydown",t)},fetchBoxData(){this.$emit("fetch-info-data")}}};var s=function(){var e=this,l=e._self._c;return l("div",[e.fieldType!=="date"&&e.fieldType!=="chips"&&e.fieldType!=="chips-below"&&e.fieldType!=="group"&&e.fieldType!=="boolean"?l(e.fieldElement,e._b({key:e.fieldKey,tag:"component",attrs:{id:e.fieldKey,label:e.labelInt,"show-label":e.fieldProps.showLabel!==void 0?e.fieldProps.showLabel:e.showLabel,placeholder:e.placeholderInt,tabs:e.fieldType==="multiline"?e.fieldProps.tabs||e.tabs:!1,"tab-labels":e.fieldType==="multiline"?e.fieldProps.tabLabels||e.tabs.map(i=>e.getI18nTerm(i)):!1,"tabs-legend":e.fieldType==="multiline"?e.fieldProps.tabsLegend||e.getI18nTerm("form.textTabsLegend"):!1,"active-tab":e.fieldType==="multiline"?e.activeTab:!1,list:e.fieldType==="autocomplete"?e.dropDownList.length?e.dropDownList:e.fieldProps.list||[]:!1,"is-loading":e.autocompleteLoading,input:e.fieldValueInt,"field-type":e.isNumberField?"number":e.fieldProps.fieldType||"text",invalid:e.invalid||e.fieldProps.invalid,required:e.required||e.fieldProps.required,"error-message":e.errorMessage||e.fieldProps.errorMessage,"validation-texts":e.fieldProps.validationTexts?e.fieldProps.validationTexts[e.isNumberField?"text":e.fieldType]||e.fieldProps.validationTexts:e.validationTexts[e.isNumberField?"text":e.fieldType],"show-error-icon":e.showErrorIcon,clearable:e.clearable,"min-length":e.field.minLength||e.fieldProps.minLength,"max-length":e.field.maxLength||e.fieldProps.maxLength,min:typeof e.formFieldXAttrs.min<"u"?e.formFieldXAttrs.min:e.fieldProps.min,max:typeof e.formFieldXAttrs.max<"u"?e.formFieldXAttrs.max:e.fieldProps.max,decimals:e.allowedDecimals,"decimal-separator":e.fieldProps.decimalSeparator||e.language==="de"?",":"."},on:{keydown:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.onEnter.apply(null,arguments)},input:function(i){return e.setInputValue(i)},"fetch-dropdown-entries":function(i){return e.$emit("fetch-autocomplete",{value:i,name:e.field.name,source:e.formFieldXAttrs.source})}},scopedSlots:e._u([{key:"label-addition",fn:function(){return[e._t("label-addition",null,{fieldName:e.field.name}),e.fieldType==="multiline"&&e.field.items&&e.field.items.properties&&e.field.items.properties.type?l("BaseDropDown",{staticClass:"base-form-field-creator__multiline-dropdown",attrs:{id:e.fieldKey,"selected-option":e.fieldValueInt&&e.fieldValueInt.type&&e.fieldValueInt.type.source?e.fieldValueInt.type:e.textTypeDefault,options:e.textTypeOptions,label:e.getI18nTerm("form.texttype"),language:e.language,"value-prop":"source"},on:{"value-selected":e.setMultilineDropDown}}):e._e()]},proxy:!0},{key:"pre-input-field",fn:function(){return[e._t("pre-input-field",null,{fieldName:e.field.name})]},proxy:!0},{key:"input-field-addition-before",fn:function(){return[e._t("input-field-addition-before",null,{fieldName:e.field.name})]},proxy:!0},{key:"input-field-inline-before",fn:function(){return[e._t("input-field-inline-before",null,{fieldName:e.field.name})]},proxy:!0},{key:"input-field-addition-after",fn:function(){return[e._t("input-field-addition-after",null,{fieldName:e.field.name})]},proxy:!0},{key:"post-input-field",fn:function(){return[e._t("post-input-field",null,{fieldName:e.field.name})]},proxy:!0},{key:"error-icon",fn:function(){return[e._t("error-icon")]},proxy:!0},{key:"remove-icon",fn:function(){return[e._t("remove-icon")]},proxy:!0},{key:"below-input",fn:function(){return[e._t("below-input",null,{fieldName:e.field.name})]},proxy:!0}],null,!0)},"component",e.fieldProps,!1)):e.fieldType==="date"?l("fieldset",{staticClass:"base-form-field-creator__date-fieldset"},[l("div",{staticClass:"base-form-field-creator__date-field-wrapper"},[l("BaseDateInput",e._b({key:e.fieldKey+"_date",staticClass:"base-form-field-creator__date-field",attrs:{id:e.fieldKey,label:e.labelInt,"show-label":e.fieldProps.showLabel!==void 0?e.fieldProps.showLabel:e.showLabel,placeholder:e.placeholderInt,"range-separator":e.fieldProps.rangeSeparator||e.getI18nTerm("form.until"),format:e.formFieldXAttrs.date_format||e.fieldProps.format,type:e.dateType.includes("timerange")?e.dateType.includes("daterange")?"daterange":"single":e.dateType,"date-format-labels":e.fieldProps.dateFormatLabels||{date:e.getI18nTerm("form.date"),month:e.getI18nTerm("form.month"),year:e.getI18nTerm("form.year")},"format-tabs-legend":e.fieldProps.formatTabsLegend||e.getI18nTerm("form.dateTabsLegend"),language:e.language,invalid:e.invalid||e.fieldProps.invalid,required:e.required||e.fieldProps.required,"error-message":e.errorMessage||e.fieldProps.errorMessage},scopedSlots:e._u([{key:"label-addition",fn:function(){return[e._t("label-addition",null,{fieldName:e.field.name})]},proxy:!0},{key:"pre-input-field",fn:function(){return[e._t("pre-input-field",null,{fieldName:e.field.name})]},proxy:!0},{key:"input-field-addition-before",fn:function(){return[e._t("input-field-addition-before",null,{fieldName:e.field.name})]},proxy:!0},{key:"input-field-inline-before",fn:function(){return[e._t("input-field-inline-before",null,{fieldName:e.field.name})]},proxy:!0},{key:"input-field-addition-after",fn:function(){return[e._t("input-field-addition-after",null,{fieldName:e.field.name})]},proxy:!0},{key:"post-input-field",fn:function(){return[e._t("post-input-field",null,{fieldName:e.field.name})]},proxy:!0},{key:"error-icon",fn:function(){return[e._t("error-icon")]},proxy:!0},{key:"remove-icon",fn:function(){return[e._t("remove-icon")]},proxy:!0},{key:"below-input",fn:function(){return[e._t("below-input",null,{fieldName:e.field.name})]},proxy:!0}],null,!0),model:{value:e.fieldValueInt,callback:function(i){e.fieldValueInt=i},expression:"fieldValueInt"}},"BaseDateInput",e.fieldProps,!1)),e.dateType.includes("timerange")?l("BaseDateInput",e._b({key:e.fieldKey+"_time",staticClass:"base-form-field-creator__date-field",attrs:{id:e.fieldKey,label:e.field.properties.time_from.title,"show-label":!1,placeholder:e.placeholderInt.time,"range-separator":e.fieldProps.rangeSeparator||e.getI18nTerm("form.until"),invalid:e.invalid||e.fieldProps.invalid,required:e.required||e.fieldProps.required,"error-message":e.errorMessage||e.fieldProps.errorMessage,type:"timerange"},model:{value:e.fieldValueInt,callback:function(i){e.fieldValueInt=i},expression:"fieldValueInt"}},"BaseDateInput",e.fieldProps,!1)):e._e()],1)]):e.fieldType==="chips"||e.fieldType==="chips-below"?l(e.fieldElement,e._b({key:e.fieldKey,tag:"component",attrs:{id:e.fieldKey,placeholder:e.placeholderInt,label:e.labelInt,"show-label":e.fieldProps.showLabel!==void 0?e.fieldProps.showLabel:e.showLabel,list:e.dropDownList.length?e.dropDownList:e.fieldProps.list||[],"allow-dynamic-drop-down-entries":e.formFieldXAttrs.dynamic_autosuggest||!!e.fieldProps.allowDynamicDropDownEntries,"allow-multiple-entries":!e.isChipsSingleSelect,"allow-unknown-entries":e.formFieldXAttrs.allow_unknown_entries||!!e.fieldProps.allowUnknownEntries,draggable:!!e.fieldProps.draggable||!e.isChipsSingleSelect,"hoverbox-content":e.hoverBoxData||e.fieldProps.hoverBoxData,sortable:e.field.name==="keywords"||e.formFieldXAttrs.sortable||!!e.fieldProps.sortable,"is-loading":e.autocompleteLoading,"sort-text":e.fieldProps.sortText||e.sortText,"sort-name":e.fieldProps.sortName||e.isContributorOrEquivalent,language:e.formFieldXAttrs.set_label_language||e.fieldType==="chips-below"?e.language:"","drop-down-no-options-info":e.fieldProps.dropDownNoOptionsInfo||e.getI18nTerm("form.noMatch"),"additional-prop-options":e.fieldType==="chips-below"?e.secondaryDropdown:!1,"additional-prop-placeholder":e.fieldType==="chips-below"?e.fieldProps.additionalPropPlaceholder||e.getI18nTerm("form.selectRoles"):!1,"additional-property-name":e.fieldType==="chips-below"?e.fieldProps.additionalPropertyName||"roles":!1,invalid:e.invalid||e.fieldProps.invalid,required:e.required||e.fieldProps.required,"error-message":e.errorMessage||e.fieldProps.errorMessage,"show-error-icon":e.showErrorIcon,"identifier-property-name":e.fieldProps.identifierPropertyName||e.identifierPropertyName,"label-property-name":e.fieldProps.labelPropertyName||e.labelPropertyName},on:{"fetch-dropdown-entries":e.fetchAutocomplete,input:function(i){e.textInput=i},"hoverbox-active":e.fetchBoxData},scopedSlots:e._u([{key:"drop-down-entry",fn:function(i){return[l("span",[e._v(" "+e._s(e.getLabel(i.item.label))+" ")]),l("span",{staticClass:"base-form-field-creator__chips-dropdown-second"},[e._v(" "+e._s(i.item.additional)+" ")]),l("span",{staticClass:"base-form-field-creator__chips-dropdown-third"},[e._v(" "+e._s(i.item.source_name)+" ")])]}},{key:"no-options",fn:function(){return[e.formFieldXAttrs.dynamic_autosuggest&&!e.fieldInput?l("span",[e._v(" "+e._s(e.getI18nTerm("form.startTyping"))+" ")]):!e.formFieldXAttrs.dynamic_autosuggest&&e.textInput?l("span",[e._v(" "+e._s(e.getI18nTerm("form.noMatch"))+" ")]):e.fieldInput&&!e.fetchingData&&!e.autocompleteLoading?l("span",[e._v(" "+e._s(e.getI18nTerm("form.noResult"))+" ")]):l("span",[e._v(" "+e._s(e.getI18nTerm("form.fetchingResults"))+" ")])]},proxy:!0},{key:"label-addition",fn:function(){return[e._t("label-addition",null,{fieldName:e.field.name})]},proxy:!0},{key:"pre-input-field",fn:function(){return[e._t("pre-input-field",null,{fieldName:e.field.name})]},proxy:!0},{key:"input-field-addition-before",fn:function(){return[e._t("input-field-addition-before",null,{fieldName:e.field.name})]},proxy:!0},{key:"input-field-inline-before",fn:function(){return[e._t("input-field-inline-before",null,{fieldName:e.field.name})]},proxy:!0},{key:"input-field-addition-after",fn:function(){return[e._t("input-field-addition-after",null,{fieldName:e.field.name})]},proxy:!0},{key:"post-input-field",fn:function(){return[e._t("post-input-field",null,{fieldName:e.field.name})]},proxy:!0},{key:"error-icon",fn:function(){return[e._t("error-icon")]},proxy:!0},{key:"remove-icon",fn:function(){return[e._t("default",null,{fieldName:e.field.name})]},proxy:!0},{key:"below-input",fn:function(){return[e._t("below-input",null,{fieldName:e.field.name})]},proxy:!0}],null,!0),model:{value:e.fieldValueInt,callback:function(i){e.fieldValueInt=i},expression:"fieldValueInt"}},"component",e.fieldProps,!1)):e.fieldType==="group"?l("div",{key:e.fieldKey,staticClass:"base-form-field-creator__field-array"},[e.formFieldXAttrs.show_label?l("div",{staticClass:"base-form-field-creator__field-array-label"},[e._v(" "+e._s(`${e.labelInt}:`)+" ")]):e._e(),l("div",{key:e.fieldKey,staticClass:"base-form-field-creator__subform-wrapper"},[l("BaseForm",e._b({staticClass:"base-form-field-creator__subform",attrs:{"form-field-json":e.groupFormFields,"value-list":e.fieldValueInt,"form-id":e.fieldKey+"_"+e.field.name,"field-props":e.fieldProps,"drop-down-lists":e.fieldGroupDropDownLists},on:{"values-changed":function(i){return e.$emit("field-value-changed",i)},"fetch-autocomplete":e.subFormFetchAutocomplete},scopedSlots:e._u([{key:"label-addition",fn:function({fieldName:i,groupNames:r}){return[e._t("label-addition",null,{fieldName:i,groupNames:(r||[]).concat(e.field.name)})]}},{key:"pre-input-field",fn:function({fieldName:i,groupNames:r}){return[e._t("pre-input-field",null,{fieldName:i,groupNames:(r||[]).concat(e.field.name)})]}},{key:"input-field-addition-before",fn:function({fieldName:i,groupNames:r}){return[e._t("input-field-addition-before",null,{fieldName:i,groupNames:(r||[]).concat(e.field.name)})]}},{key:"input-field-inline-before",fn:function({fieldName:i,groupNames:r}){return[e._t("input-field-inline-before",null,{fieldName:i,groupNames:(r||[]).concat(e.field.name)})]}},{key:"input-field-addition-after",fn:function({fieldName:i,groupNames:r}){return[e._t("input-field-addition-after",null,{fieldName:i,groupNames:(r||[]).concat(e.field.name)})]}},{key:"post-input-field",fn:function({fieldName:i,groupNames:r}){return[e._t("post-input-field",null,{fieldName:i,groupNames:(r||[]).concat(e.field.name)})]}},{key:"error-icon",fn:function(){return[e._t("error-icon")]},proxy:!0},{key:"remove-icon",fn:function(){return[e._t("remove-icon")]},proxy:!0},{key:"below-input",fn:function({fieldName:i,groupNames:r}){return[e._t("below-input",null,{fieldName:i,groupNames:(r||[]).concat(e.field.name)})]}}],null,!0)},"BaseForm",e.fieldGroupParams,!1))],1)]):e.fieldType==="boolean"?[l("BaseToggle",e._b({staticClass:"base-form-field-creator__toggle",attrs:{name:e.fieldKey,label:e.labelInt,checked:e.fieldValue,"bind-slot-to-state":e.fieldProps.bindSlotToState||!0},on:{clicked:function(i){return e.$emit("field-value-changed",i)}}},"BaseToggle",e.fieldProps,!1),[e.formFieldXAttrs.subtext&&e.formFieldXAttrs.subtext.value?l("BaseLink",{attrs:{source:e.formFieldXAttrs.subtext.source||"",url:e.formFieldXAttrs.subtext.url||"",value:e.formFieldXAttrs.subtext.value}}):e._e()],1)]:e._e()],2)},d=[],f=a.default(o,s,d,!1,null,"05f05736",null,null);const u=f.exports;exports.default=u;
//# sourceMappingURL=BaseFormFieldCreator.cjs.js.map
